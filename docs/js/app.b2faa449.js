(function(t){function e(e){for(var a,s,o=e[0],u=e[1],c=e[2],p=0,d=[];p<o.length;p++)s=o[p],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&d.push(n[s][0]),n[s]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);l&&l(e);while(d.length)d.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],a=!0,o=1;o<r.length;o++){var u=r[o];0!==n[u]&&(a=!1)}a&&(i.splice(e--,1),t=s(s.s=r[0]))}return t}var a={},n={app:0},i=[];function s(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=a,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(r,a,function(e){return t[e]}.bind(null,a));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var a=r("85ec"),n=r.n(a);n.a},1178:function(t,e,r){"use strict";var a=r("60ae"),n=r.n(a);n.a},"11fc":function(t,e,r){"use strict";var a=r("8358"),n=r.n(a);n.a},"1e31":function(t,e,r){},"25f3":function(t,e,r){},2632:function(t,e,r){},3198:function(t,e,r){},3257:function(t,e,r){"use strict";var a=r("a216"),n=r.n(a);n.a},"3c33":function(t,e,r){"use strict";var a=r("8f99"),n=r.n(a);n.a},"3e47":function(t,e,r){},"427e":function(t,e,r){"use strict";var a=r("2632"),n=r.n(a);n.a},"477b":function(t,e,r){"use strict";var a=r("3198"),n=r.n(a);n.a},5047:function(t,e,r){},5664:function(t,e,r){"use strict";var a=r("e70b"),n=r.n(a);n.a},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=r("1dce"),i=r.n(n),s=r("ee98"),o=r.n(s),u=r("7212"),c=r.n(u),l=r("e166"),p=r.n(l),d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("app-header"),r("router-view"),r("notifications",{attrs:{group:"auth"}})],1)},v=[],f=(r("ac1f"),r("5319"),r("96cf"),r("1da1")),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"header",attrs:{id:"header"}},[a("div",{staticClass:"header__container"},[a("router-link",{staticClass:"header__logo",attrs:{"data-scroll":"#intro",tag:"div",to:"/products"}},[a("img",{attrs:{src:r("6871"),alt:""}})]),a("div",{staticClass:"header__nav"},[t.showNav?a("app-nav",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideNavigation,expression:"hideNavigation"}]}):t._e()],1),a("div",{staticClass:"header__actions"},[a("router-link",{staticClass:"header__cart",attrs:{to:"/cart"}},[a("i",{staticClass:"fas fa-shopping-cart"}),t._v(" ("+t._s(t.productsAmount)+") ")]),a("app-nav-toggle",{attrs:{"is-active":t.showNav},nativeOn:{click:function(e){return t.showNavigation(e)}}})],1)],1)])},h=[],_=r("e67d"),g=r.n(_),w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nav",{staticClass:"nav",attrs:{id:"nav"}},[r("router-link",{staticClass:"nav__link",attrs:{to:"/products"}},[t._v(" Продукты ")]),r("router-link",{staticClass:"nav__link",attrs:{to:"/settings"}},[t._v(" Настройки ")]),r("router-link",{staticClass:"nav__link",attrs:{to:"/profile/"+t.userId}},[t._v(" Мой профиль ")]),r("router-link",{staticClass:"nav__link",attrs:{to:"/new-product"}},[t._v(" Продать блюдо ")]),r("router-link",{staticClass:"nav__link",attrs:{to:"/cart"}},[t._v(" Корзина ("),r("span",[t._v("0")]),t._v(") ")]),t.isAuthorized?r("div",{staticClass:"nav__link",on:{click:t.signout}},[t._v(" Выйти ")]):t._e()],1)},b=[],C={computed:{isAuthorized:function(){return this.$store.getters.isAuthorized},userId:function(){return this.$store.state.authorization.userId}},methods:{signout:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("signout");case 2:t.$router.replace("/signin");case 3:case"end":return e.stop()}}),e)})))()}}},y=C,k=(r("abd8"),r("2877")),$=Object(k["a"])(y,w,b,!1,null,null,null),x=$.exports,O=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"nav-toggle",class:{active:t.isActive},attrs:{id:"nav-toggle"}},[t._m(0)])},P=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"nav-toggle__button",attrs:{type:"button"}},[r("span",{staticClass:"nav-toggle__item"},[r("span")])])}],j={props:{isActive:{type:Boolean,default:!1}}},R=j,E=(r("1178"),Object(k["a"])(R,O,P,!1,null,null,null)),D=E.exports,I={components:{appNav:x,appNavToggle:D},directives:{ClickOutside:g.a},data:function(){return{showNav:!1}},computed:{productsAmount:function(){return this.$store.state.cart.cart.length}},watch:{$route:function(){this.showNav=!1}},mounted:function(){this.popupItem=this.$el},methods:{showNavigation:function(){this.showNav=!this.showNav},hideNavigation:function(){this.showNav&&(this.showNav=!1)}}},N=I,T=(r("477b"),Object(k["a"])(N,m,h,!1,null,null,null)),U=T.exports,S=r("2f62"),z="idToken";function A(t){return q.apply(this,arguments)}function q(){return q=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.setItem(z,e));case 1:case"end":return t.stop()}}),t)}))),q.apply(this,arguments)}function M(){return L.apply(this,arguments)}function L(){return L=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.getItem(z));case 1:case"end":return t.stop()}}),t)}))),L.apply(this,arguments)}function B(){return F.apply(this,arguments)}function F(){return F=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.removeItem(z));case 1:case"end":return t.stop()}}),t)}))),F.apply(this,arguments)}var H="userId";function J(t){return G.apply(this,arguments)}function G(){return G=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:localStorage.setItem(H,e);case 1:case"end":return t.stop()}}),t)}))),G.apply(this,arguments)}function K(){return Q.apply(this,arguments)}function Q(){return Q=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.getItem(H));case 1:case"end":return t.stop()}}),t)}))),Q.apply(this,arguments)}function V(){return W.apply(this,arguments)}function W(){return W=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:localStorage.removeItem(H);case 1:case"end":return t.stop()}}),t)}))),W.apply(this,arguments)}var X="cart";function Y(t){return Z.apply(this,arguments)}function Z(){return Z=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.setItem(X,e));case 1:case"end":return t.stop()}}),t)}))),Z.apply(this,arguments)}function tt(){return et.apply(this,arguments)}function et(){return et=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.getItem(X));case 1:case"end":return t.stop()}}),t)}))),et.apply(this,arguments)}function rt(){return at.apply(this,arguments)}function at(){return at=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.removeItem(X));case 1:case"end":return t.stop()}}),t)}))),at.apply(this,arguments)}r("d3b7");var nt=r("bc3a"),it=r.n(nt);a["default"].use(o.a);var st=it.a.create({baseURL:"https://strapi.kameas.ru/"});st.interceptors.response.use((function(t){return t}),(function(t){a["default"].notify({group:"auth",type:"error",title:"ERROR",text:"Please provide valid email address!"}),Promise.reject(t)}));var ot=st;function ut(t){return ct.apply(this,arguments)}function ct(){return ct=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ot.post("auth/local",{identifier:e.email,password:e.password}));case 1:case"end":return t.stop()}}),t)}))),ct.apply(this,arguments)}r("b0c0");function lt(t){return pt.apply(this,arguments)}function pt(){return pt=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ot.post("auth/local/register",{username:e.login,email:e.email,password:e.password,name:e.name}));case 1:case"end":return t.stop()}}),t)}))),pt.apply(this,arguments)}function dt(t,e){return ot.post("products",t,{headers:{Authorization:"Bearer ".concat(e)}})}function vt(t,e){return ft.apply(this,arguments)}function ft(){return ft=Object(f["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ot.post("upload",e,{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"multipart/form-data"}}));case 1:case"end":return t.stop()}}),t)}))),ft.apply(this,arguments)}function mt(t,e){return ht.apply(this,arguments)}function ht(){return ht=Object(f["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ot.get("products?_sort=createdAt:DESC&_start=".concat(r,"&_limit=10"),{headers:{Authorization:"Bearer ".concat(e)}}));case 1:case"end":return t.stop()}}),t)}))),ht.apply(this,arguments)}function _t(t,e){return gt.apply(this,arguments)}function gt(){return gt=Object(f["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ot.put("products/".concat(e.id),e,{headers:{Authorization:"Bearer ".concat(r)}}));case 1:case"end":return t.stop()}}),t)}))),gt.apply(this,arguments)}function wt(t,e){return bt.apply(this,arguments)}function bt(){return bt=Object(f["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ot.get("products?id=".concat(e),{headers:{Authorization:"Bearer ".concat(r)}}));case 1:case"end":return t.stop()}}),t)}))),bt.apply(this,arguments)}function Ct(t){return yt.apply(this,arguments)}function yt(){return yt=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ot.get("users/me",{headers:{Authorization:"Bearer ".concat(e)}}));case 1:case"end":return t.stop()}}),t)}))),yt.apply(this,arguments)}function kt(t,e){return $t.apply(this,arguments)}function $t(){return $t=Object(f["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ot.post("upload",r,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"}}));case 1:case"end":return t.stop()}}),t)}))),$t.apply(this,arguments)}function xt(t,e,r){return Ot.apply(this,arguments)}function Ot(){return Ot=Object(f["a"])(regeneratorRuntime.mark((function t(e,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ot.put("users/".concat(r),a,{headers:{Authorization:"Bearer ".concat(e)}}));case 1:case"end":return t.stop()}}),t)}))),Ot.apply(this,arguments)}a["default"].use(S["a"]);var Pt={idToken:null,userId:null,user:null},jt={authUser:function(t,e){t.idToken=e.idToken,t.userId=e.userId},storeUser:function(t,e){t.user=e},clearAuthData:function(t){t.idToken=null,t.userId=null}},Rt={signin:function(t,e){return Object(f["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.commit,r.prev=1,r.next=4,ut(e);case 4:n=r.sent,a("authUser",{idToken:n.data.jwt,userId:n.data.user.id}),a("storeUser",{email:e.email,password:e.password,userId:n.data.user.id,idToken:n.data.jwt}),A(n.data.jwt),J(n.data.user.id),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](1),console.log(r.t0.message);case 14:case"end":return r.stop()}}),r,null,[[1,11]])})))()},signup:function(t,e){return Object(f["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.commit,r.next=3,lt(e);case 3:n=r.sent,a("authUser",{idToken:n.data.jwt,userId:n.data.user.id}),a("storeUser",{email:e.email,password:e.password,userId:n.data.user.id}),A(n.data.jwt),J(n.data.user.id);case 8:case"end":return r.stop()}}),r)})))()},signout:function(t){var e=t.commit;e("clearAuthData"),B(),V()},tryAutoLogin:function(t,e){return Object(f["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=t.commit,e.idToken){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,a("authUser",{idToken:e.idToken,userId:e.userId});case 5:case"end":return r.stop()}}),r)})))()}},Et={isAuthorized:function(t){return null!==t.userId},user:function(t){return t.user}},Dt={state:Pt,mutations:jt,actions:Rt,getters:Et},It=(r("c740"),{cart:[]}),Nt={addItemToCart:function(t,e){var r=t.cart.findIndex((function(t){return t.id===e.id}));r>=0?t.cart[r].count+=1:(console.log(t.cart),t.cart.push(e))},saveCart:function(t,e){t.cart=e}},Tt={addItemToCart:function(t,e){var r=t.commit,a=t.dispatch;r("addItemToCart",e),a("saveCart",It.cart)},saveCart:function(t,e){var r=t.commit;r("saveCart",e),Y(JSON.stringify(e))},getCart:function(t){var e=t.commit;tt().then((function(t){var r=JSON.parse(t);e("saveCart",r)}))}},Ut={cart:function(t){return t.cart}},St={state:It,mutations:Nt,actions:Tt,getters:Ut};a["default"].use(S["a"]),a["default"].use(S["a"]);var zt=new S["a"].Store({actions:{},modules:{authorization:Dt,cart:St}}),At={name:"App",components:{appHeader:U},data:function(){return{test:"pepe"}},created:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=localStorage.getItem("path"),!r){e.next=5;break}return localStorage.removeItem("path"),t.$router.replace(r),e.abrupt("return");case 5:return e.next=7,M();case 7:return a=e.sent,e.next=10,K();case 10:return n=e.sent,e.next=13,zt.dispatch("tryAutoLogin",{idToken:a,userId:n});case 13:case"end":return e.stop()}}),e)})))()}},qt=At,Mt=(r("034f"),Object(k["a"])(qt,d,v,!1,null,null,null)),Lt=Mt.exports,Bt=r("8c4f"),Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"welcome",attrs:{id:"welcome"}},[a("div",{staticClass:"container"},[a("img",{staticClass:"welcome-logo",attrs:{src:r("6871"),alt:""}}),a("h1",{staticClass:"welcome-headline"},[t._v(" Накорми соседа! ")]),a("div",{staticClass:"welcome-links"},[a("router-link",{staticClass:"welcome-link",attrs:{to:"/signin"}},[t._v(" Войти ")]),a("router-link",{staticClass:"welcome-link",attrs:{to:"/signup"}},[t._v(" Зарегистрироваться ")])],1)])])},Ht=[],Jt=(r("3257"),{}),Gt=Object(k["a"])(Jt,Ft,Ht,!1,null,null,null),Kt=Gt.exports,Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"signin"},[a("div",{staticClass:"container"},[a("img",{staticClass:"signin__logo",attrs:{src:r("6871"),alt:""}}),a("form",{staticClass:"signin__form",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("div",{staticClass:"headline"},[t._v(" Вход ")]),a("div",{staticClass:"form-group",class:{invalid:t.$v.email.$error}},[a("label",{staticClass:"signin__label",attrs:{for:"login"}},[t._v("E-mail:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"login",type:"text"},domProps:{value:t.email},on:{blur:function(e){return t.$v.email.$touch()},input:function(e){e.target.composing||(t.email=e.target.value)}}}),t.$v.email.$anyError?a("p",[t._v(" Введите email. ")]):t._e()]),a("div",{staticClass:"form-group",class:{invalid:t.$v.password.$error}},[a("label",{staticClass:"signin__label",attrs:{for:"password"}},[t._v("Пароль:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password"},domProps:{value:t.password},on:{blur:function(e){return t.$v.password.$touch()},input:function(e){e.target.composing||(t.password=e.target.value)}}}),t.$v.password.$anyError?a("p",[t._v(" Введите пароль. ")]):t._e()]),a("div",{staticClass:"spacer"}),a("app-button",{attrs:{value:"Войти"}}),a("div",{staticClass:"spacer"}),a("router-link",{attrs:{to:"/signup"}},[a("app-button",{attrs:{value:"Регистрация"}})],1)],1)])])},Vt=[],Wt=r("b5ae"),Xt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"button"},[t._v(" "+t._s(t.value)+" ")])},Yt=[],Zt={props:{value:{type:String,default:null}}},te=Zt,ee=(r("8274"),Object(k["a"])(te,Xt,Yt,!1,null,null,null)),re=ee.exports,ae={components:{appButton:re},data:function(){return{email:"",password:""}},validations:{email:{required:Wt["required"],email:Wt["email"]},password:{required:Wt["required"]}},methods:{onSubmit:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("signin",{email:t.email,password:t.password});case 2:t.$router.replace("/products");case 3:case"end":return e.stop()}}),e)})))()}}},ne=ae,ie=(r("11fc"),Object(k["a"])(ne,Qt,Vt,!1,null,null,null)),se=ie.exports,oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"signup"},[a("div",{staticClass:"container"},[a("img",{staticClass:"signup__logo",attrs:{src:r("6871"),alt:""}}),a("form",{staticClass:"signup__form",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("div",{staticClass:"headline"},[t._v(" Регистрация ")]),a("div",{staticClass:"form-group",class:{invalid:t.$v.name.$error}},[a("label",{staticClass:"signup__label",attrs:{for:"name"}},[t._v("Ваше имя:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{id:"name",type:"text"},domProps:{value:t.name},on:{blur:function(e){return t.$v.name.$touch()},input:function(e){e.target.composing||(t.name=e.target.value)}}}),t.$v.name.$anyError?a("p",[t._v(" Пожалуйста, введите имя! ")]):t._e()]),a("div",{staticClass:"form-group",class:{invalid:t.$v.login.$error}},[a("label",{staticClass:"signup__label",attrs:{for:"login"}},[t._v("Придумайте логин:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],attrs:{id:"login",type:"text"},domProps:{value:t.login},on:{blur:function(e){return t.$v.login.$touch()},input:function(e){e.target.composing||(t.login=e.target.value)}}}),t.$v.login.$anyError?a("p",[t._v(" Пожалуйста, введите логин (не менее 6 знаков)! ")]):t._e()]),a("div",{staticClass:"form-group",class:{invalid:t.$v.email.$error}},[a("label",{staticClass:"signup__label",attrs:{for:"email"}},[t._v("Ваш e-mail:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"email",type:"text"},domProps:{value:t.email},on:{blur:function(e){return t.$v.email.$touch()},input:function(e){e.target.composing||(t.email=e.target.value)}}}),t.$v.email.$anyError?a("p",[t._v(" Пожалуйста, введите правильный email! ")]):t._e()]),a("div",{staticClass:"form-group",class:{invalid:t.$v.password.$error}},[a("label",{staticClass:"signup__label",attrs:{for:"password"}},[t._v("Придумайте пароль:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password"},domProps:{value:t.password},on:{blur:function(e){return t.$v.password.$touch()},input:function(e){e.target.composing||(t.password=e.target.value)}}}),t.$v.password.$anyError?a("p",[t._v(" Пароль должен быть не менее 6 знаков! ")]):t._e()]),a("div",{staticClass:"form-group",class:{invalid:t.$v.confirmPassword.$error}},[a("label",{staticClass:"signup__label",attrs:{for:"confirmPassword"}},[t._v("Повторите пароль:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPassword,expression:"confirmPassword"}],attrs:{id:"confirmPassword",type:"password"},domProps:{value:t.confirmPassword},on:{blur:function(e){return t.$v.confirmPassword.$touch()},input:function(e){e.target.composing||(t.confirmPassword=e.target.value)}}}),t.$v.confirmPassword.$anyError?a("p",[t._v(" Пароль должен совпадать! ")]):t._e()]),a("div",{staticClass:"spacer"}),a("app-button",{attrs:{value:"Зарегистрироваться",disabled:t.$v.$invalid}}),a("div",{staticClass:"spacer"}),a("router-link",{attrs:{to:"/signin"}},[a("app-button",{attrs:{value:"Войти"}})],1)],1)])])},ue=[],ce={components:{appButton:re},data:function(){return{name:"",login:"",email:"",password:"",confirmPassword:""}},validations:{email:{required:Wt["required"],email:Wt["email"]},name:{required:Wt["required"]},login:{required:Wt["required"],minLen:Object(Wt["minLength"])(6)},password:{required:Wt["required"],minLen:Object(Wt["minLength"])(6)},confirmPassword:{sameAs:Object(Wt["sameAs"])("password")}},methods:{onSubmit:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("signup",{name:t.name,login:t.login,email:t.email,password:t.password});case 2:t.$router.replace("/products");case 3:case"end":return e.stop()}}),e)})))()}}},le=ce,pe=(r("74c8"),Object(k["a"])(le,oe,ue,!1,null,null,null)),de=pe.exports,ve=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"products"},[r("div",{staticClass:"spacer"}),t._l(t.products,(function(t){return r("app-product-preview",{key:t.id,attrs:{product:t}})})),t.loadedData?r("infinite-loading",{on:{infinite:t.infiniteHandler}}):t._e(),t.loadedData?t._e():r("app-loading")],2)])},fe=[],me=(r("99af"),r("4de4"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("router-link",{staticClass:"product-preview",attrs:{to:{name:"ProductDetails",params:{id:t.product.id}}}},[r("app-gallery",{attrs:{product:t.product}}),r("div",{staticClass:"product-preview__info"},[r("div",{staticClass:"product-preview__name"},[t._v(" "+t._s(t.product.name)+" ")]),r("div",{staticClass:"product-preview__price"},[t._v(" "+t._s(t.product.price)+" руб. ")])])],1)],1)}),he=[],_e=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("swiper",{staticClass:"swiper"},[t._l(t.product.image,(function(t){return r("swiper-slide",{key:t.url},[r("div",{staticClass:"product-preview__img",style:{backgroundImage:"url(https://strapi.kameas.ru"+t.url+")"}})])})),r("div",{staticClass:"swiper-button-next",attrs:{slot:"button-next"},slot:"button-next"})],2)},ge=[],we={components:{Swiper:u["Swiper"],SwiperSlide:u["SwiperSlide"]},directives:{swiper:u["directive"]},props:{product:{type:Object,default:function(){return{}}}}},be=we,Ce=Object(k["a"])(be,_e,ge,!1,null,null,null),ye=Ce.exports,ke={components:{appGallery:ye},props:{product:{type:Object,default:function(){return{}}}}},$e=ke,xe=(r("eb0a"),Object(k["a"])($e,me,he,!1,null,null,null)),Oe=xe.exports,Pe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("loading",{attrs:{active:t.isLoading,"is-full-page":t.fullPage,color:"#d1cece"},on:{"update:active":function(e){t.isLoading=e}}})},je=[],Re=r("9062"),Ee=r.n(Re),De=(r("e40d"),{components:{Loading:Ee.a},data:function(){return{fullPage:!0,isLoading:!0}}}),Ie=De,Ne=Object(k["a"])(Ie,Pe,je,!1,null,null,null),Te=Ne.exports,Ue={components:{appProductPreview:Oe,appLoading:Te},data:function(){return{start:0,loadedData:!1,products:[]}},methods:{fetchProducts:function(t){var e=this;mt(this.$store.state.authorization.idToken,t).then((function(t){console.log("Data loading");var r=t.data;e.products=r.filter((function(t){return!0===t.active})),e.loadedData=!0})).catch((function(t){return console.log(t)}))},infiniteHandler:function(t){var e=this;this.start+=10,mt(this.$store.state.authorization.idToken,this.start).then((function(r){if(r.data.length>0){var a=r.data,n=a.filter((function(t){return!0===t.active})),i=e.products.concat(n);e.products=i,t.loaded()}else t.complete()}))}},beforeRouteEnter:function(t,e,r){r((function(t){t.fetchProducts(0)}))}},Se=Ue,ze=(r("860f"),Object(k["a"])(Se,ve,fe,!1,null,null,null)),Ae=ze.exports,qe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.product?r("div",{staticClass:"product-detail"},[r("app-gallery",{attrs:{product:t.product}}),r("div",{staticClass:"container"},[r("div",{staticClass:"product-detail__info"},[r("div",{staticClass:"product-detail__name"},[t._v(" "+t._s(t.product.name)+" ")]),r("div",{staticClass:"product-detail__price"},[t._v(" "+t._s(t.product.price)+" руб. ")])]),r("router-link",{staticClass:"product-detail__author",attrs:{to:{name:"CookerProfile",params:{id:t.product.author.id}}}},[t.product.author.image[0]?r("div",{staticClass:"product-detail__author-img",style:{backgroundImage:"url(https://strapi.kameas.ru"+t.product.author.image[0].url+")"}}):r("div",{staticClass:"product-detail__author-img",staticStyle:{"{backgroundImage":"'url(https://place-hold.it/30)'}"}}),r("div",{staticClass:"product-detail__author-name"},[t._v(" "+t._s(t.product.author.name)+" ")])]),r("div",{staticClass:"product-detail__description"},[t._v(" "+t._s(t.product.description)+" ")]),r("div",{staticClass:"product-detail__details"},[r("table",{staticClass:"product-detail__payments"},[r("tr",[r("td",[t._v("Оплата:")]),r("td",[t._v(t._s(t.paymentMethod))])]),r("tr",[r("td",[t._v("Доставка:")]),r("td",[t._v(t._s(t.delivery))])]),r("tr",[r("td",[t._v("Для веганов:")]),r("td",[t._v(t._s(t.vegan))])])])]),t.product.active?r("app-button",{attrs:{value:t.value},nativeOn:{click:function(e){return t.addItemToCart(e)}}}):t._e(),r("div",{staticClass:"spacer"}),t.authUser&&t.product.active?r("app-button",{attrs:{value:"Закрыть объявление"},nativeOn:{click:function(e){return t.removeProduct(e)}}}):t._e(),t.loadedData?t._e():r("app-loading")],1)],1):t._e()},Me=[],Le=r("3835"),Be={components:{appButton:re,appGallery:ye,appLoading:Te},data:function(){return{value:"Добавить в корзину",product:null,loadedData:!1}},computed:{paymentMethod:function(){return"cash"===this.product.paymentMethod?"Наличные":"Перевод на карту"},delivery:function(){return"pickUp"===this.product.delivery?"Забрать у меня":"Доставлю на дом"},vegan:function(){return this.product.vegan?"Да":"Нет"},authUser:function(){return this.product.author.id===this.$store.state.authorization.userId}},created:function(){this.getProductData(this.$route.params.id)},methods:{getProductData:function(t){var e=this;wt(t,this.$store.state.authorization.idToken).then((function(t){e.loadedData=!0;var r=Object(Le["a"])(t.data,1);e.product=r[0]})).catch((function(t){return console.log(t)}))},addItemToCart:function(){var t={name:this.product.name,price:this.product.price,image:this.product.image,count:1,id:this.product.id};this.$store.dispatch("addItemToCart",t)},removeProduct:function(){this.product.active=!1,_t(this.product,this.$store.state.authorization.idToken).then((function(t){console.log(t)})).catch((function(t){return console.log(t)}))}}},Fe=Be,He=(r("a887"),Object(k["a"])(Fe,qe,Me,!1,null,null,null)),Je=He.exports,Ge=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"spacer"}),r("div",{staticClass:"headline"},[t._v(" Новое блюдо ")]),r("form",{ref:"uploadForm",staticClass:"new-product",attrs:{action:""}},[r("label",{attrs:{for:"new-product__name"}},[t._v("Название:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"new-product__input",attrs:{id:"new-product__name",type:"text"},domProps:{value:t.name},on:{blur:function(e){return t.$v.name.$touch()},input:function(e){e.target.composing||(t.name=e.target.value)}}}),t.$v.name.$anyError?r("p",{staticClass:"error-message"},[t._v(" Имя является обязательной строкой! ")]):t._e(),r("label",{staticClass:"error-message",attrs:{for:"new-product__price"}},[t._v("Цена:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],staticClass:"new-product__input",attrs:{id:"new-product__price",type:"text"},domProps:{value:t.price},on:{blur:function(e){return t.$v.price.$touch()},input:function(e){e.target.composing||(t.price=e.target.value)}}}),t.$v.price.$anyError?r("p",{staticClass:"error-message"},[t._v(" Пожалуйста, введите число! ")]):t._e(),r("label",{attrs:{for:"file"}},[t._v("Загрузите фото блюда:")]),r("div",[r("file-upload",{ref:"upload",staticClass:"new-product__upload-button",attrs:{multiple:!0,"post-action":"/post.method","put-action":"/put.method"},on:{"input-file":t.inputFile,"input-filter":t.inputFilter},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}},[r("i",{staticClass:"fa fa-plus"}),t._v(" Выберите файлы ")])],1),t.files.length>0?r("div",{staticClass:"new-product__upload-list"},[t._v(" Загруженные файлы: "),r("ul",t._l(t.files,(function(e){return r("li",{key:e.id},[r("span",[t._v(t._s(e.name))])])})),0)]):t._e(),t.$v.file.$anyError?r("p",{staticClass:"error-message"},[t._v(" Пожалуйста, прикрепите фото блюда! ")]):t._e(),r("label",{attrs:{for:"new-product__info"}},[t._v("Описание:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"new-product__input",attrs:{id:"new-product__info",type:"text"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),r("label",{attrs:{for:"new-product__payment-method"}},[t._v("Предпочитаемый способ оплаты:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.chosenPaymentMethod,expression:"chosenPaymentMethod"}],attrs:{id:"new-product__payment-method"},on:{blur:function(e){return t.$v.chosenPaymentMethod.$touch()},change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.chosenPaymentMethod=e.target.multiple?r:r[0]}}},[r("option",[t._v("Перевод на карту")]),r("option",[t._v("Наличными")])]),t.$v.chosenPaymentMethod.$anyError?r("p",{staticClass:"error-message"},[t._v(" Пожалуйста, выберите способ оплаты. ")]):t._e(),r("label",{attrs:{for:"new-product__delivery"}},[t._v("Доставка:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.chosenDeliveryMethod,expression:"chosenDeliveryMethod"}],attrs:{id:"new-product__delivery"},on:{blur:function(e){return t.$v.chosenDeliveryMethod.$touch()},change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.chosenDeliveryMethod=e.target.multiple?r:r[0]}}},[r("option",[t._v("На дом")]),r("option",[t._v("Забрать у меня")])]),t.$v.chosenDeliveryMethod.$anyError?r("p",{staticClass:"error-message"},[t._v(" Пожалуйста, выберите способ доставки. ")]):t._e(),r("label",[t._v("Для веганов:")]),r("div",{staticClass:"new-product__vegan"},[r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.vegan,expression:"vegan"}],attrs:{id:"yes",type:"radio",value:"true"},domProps:{checked:t._q(t.vegan,"true")},on:{blur:function(e){return t.$v.vegan.$touch()},change:function(e){t.vegan="true"}}}),r("label",{attrs:{for:"yes"}},[t._v("Да")]),t.$v.vegan.$anyError?r("p",{staticClass:"error-message"},[t._v(" Пожалуйста, укажите, подходит ли блюдо для веганов! ")]):t._e()]),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.vegan,expression:"vegan"}],attrs:{id:"no",type:"radio",value:"false"},domProps:{checked:t._q(t.vegan,"false")},on:{change:function(e){t.vegan="false"}}}),r("label",{attrs:{for:"no"}},[t._v("Нет")])])])]),r("div",{staticClass:"spacer"}),r("app-button",{attrs:{value:t.value},nativeOn:{click:function(e){return t.saveProduct(e)}}})],1)},Ke=[],Qe=(r("a4d3"),r("e01a"),r("3ca3"),r("ddb0"),r("2b3d"),r("b85c")),Ve={components:{appButton:re},data:function(){return{value:"Сохранить",name:"",description:"",price:null,chosenPaymentMethod:"",chosenDeliveryMethod:"",vegan:null,files:[]}},validations:{name:{required:Wt["required"]},price:{required:Wt["required"],numeric:Wt["numeric"]},file:{required:Wt["required"]},chosenPaymentMethod:{required:Wt["required"]},chosenDeliveryMethod:{required:Wt["required"]},vegan:{required:Wt["required"]}},computed:{author:function(){return this.$store.state.authorization.userId},delivery:function(){return"На дом"===this.chosenDeliveryMethod?"deliveryToHome":"pickUp"},paymentMethod:function(){return"Наличные"===this.chosenPaymentMethod?"cash":"card"}},methods:{saveProduct:function(){var t=this;console.log("Продукт сохранен!");var e,r={name:this.name,description:this.description,price:this.price,paymentMethod:this.paymentMethod,delivery:this.delivery,vegan:this.vegan,author:this.author,active:!0},a=new FormData,n=Object(Qe["a"])(this.files);try{for(n.s();!(e=n.n()).done;){var i=e.value;a.append("files",i.file,i.file.name)}}catch(s){n.e(s)}finally{n.f()}vt(a,this.$store.state.authorization.idToken).then((function(e){var a,n=e.data,i=[],o=Object(Qe["a"])(n);try{for(o.s();!(a=o.n()).done;){var u=a.value;i.push(u.id)}}catch(s){o.e(s)}finally{o.f()}r.image=i,dt(r,t.$store.state.authorization.idToken).then((function(e){var r=e.data.id;t.$router.replace("/products/".concat(r))}))}))},inputFile:function(t,e){t&&e&&!t.active&&e.active&&(console.log("response",t.response),t.xhr&&console.log("status",t.xhr.status))},inputFilter:function(t,e,r){if(t&&!e&&!/\.(jpeg|jpe|jpg|gif|png|webp)$/i.test(t.name))return r();t.blob="";var a=window.URL||window.webkitURL;a&&a.createObjectURL&&(t.blob=a.createObjectURL(t.file))}}},We=Ve,Xe=(r("7fc1"),Object(k["a"])(We,Ge,Ke,!1,null,null,null)),Ye=Xe.exports,Ze=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"spacer"}),r("div",{staticClass:"headline"},[t._v(" Корзина ")]),t.cart.length>0?r("div",{staticClass:"cart cart_full"},[t._l(t.cart,(function(e){return r("app-cart-item",{key:e.id,attrs:{item:e}},[t._v(" "+t._s(t.cart)+" ")])})),r("div",{staticClass:"spacer"}),r("app-button",{attrs:{value:"Подтвердить"},nativeOn:{click:function(e){return t.confirmCart(e)}}}),r("div",{staticClass:"spacer"}),r("app-button",{attrs:{value:"Очистить корзину"},nativeOn:{click:function(e){return t.clearCart(e)}}})],2):r("div",{staticClass:"cart cart_empty"},[r("i",{staticClass:"far fa-sad-tear"}),t._v(" Здесь пока ничего нет... ")])])},tr=[],er=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"product-preview product-preview_type_vertical"},[r("div",{staticClass:"product-preview__description"},[r("img",{attrs:{src:"https://strapi.kameas.ru"+t.item.image[0].url,alt:""}}),r("div",{staticClass:"product-preview__info"},[r("div",{staticClass:"product-preview__name"},[t._v(" "+t._s(t.item.name)+" ")]),r("div",{staticClass:"product-preview__price"},[t._v(" "+t._s(t.item.price)+" руб. ")])])]),r("div",{staticClass:"product-preview__prices"},[r("div",{staticClass:"product-preview__amount"},[r("div",{staticClass:"product-preview__prices-plus-button",on:{click:t.increaseCount}},[r("i",{staticClass:"fas fa-plus-circle"})]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.item.count,expression:"item.count"}],staticClass:"product-preview__count",attrs:{type:"number",min:"0",step:"1"},domProps:{value:t.item.count},on:{input:function(e){e.target.composing||t.$set(t.item,"count",e.target.value)}}}),r("div",{staticClass:"product-preview__prices-minus-button",on:{click:t.decreaseCount}},[r("i",{staticClass:"fas fa-minus-circle"})])]),r("div",{staticClass:"product-preview__sum"},[t._v(" Всего: "+t._s(t.item.price*t.item.count)+" руб. ")])])]),r("div",{staticClass:"spacer"})])},rr=[],ar={props:{item:{type:Object,default:function(){return{}}}},computed:{count:function(){return this.item.count}},methods:{increaseCount:function(){this.item.count+=1},decreaseCount:function(){this.item.count-=1}}},nr=ar,ir=(r("e22a"),Object(k["a"])(nr,er,rr,!1,null,null,null)),sr=ir.exports,or={components:{appCartItem:sr,appButton:re},computed:{cart:function(){return this.$store.getters.cart}},methods:{confirmCart:function(){this.clearCart(),this.$router.replace("/confirm")},clearCart:function(){rt()}},beforeRouteEnter:function(t,e,r){r((function(t){t.$store.dispatch("getCart")}))}},ur=or,cr=(r("3c33"),Object(k["a"])(ur,Ze,tr,!1,null,null,null)),lr=cr.exports,pr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"spacer"}),r("div",{staticClass:"headline"},[t._v(" Профиль ")]),r("form",{staticClass:"user-profile",attrs:{action:""}},[r("label",{attrs:{for:"user-profile__name"}},[t._v("Имя:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"user-profile__input",attrs:{id:"user-profile__name",type:"text",disabled:!t.isEditing},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),r("label",{attrs:{for:"user-profile__address"}},[t._v("Адрес:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"user-profile__input",attrs:{id:"user-profile__address",type:"text",disabled:!t.isEditing},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}}),r("label",{attrs:{for:"user-profile__email"}},[t._v("Почта:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"user-profile__input",attrs:{id:"user-profile__email",type:"email",disabled:!t.isEditing},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),r("label",{attrs:{for:"user-profile__number"}},[t._v("Телефон:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.number,expression:"number"}],staticClass:"user-profile__input",attrs:{id:"user-profile__number",type:"text",disabled:!t.isEditing},domProps:{value:t.number},on:{input:function(e){e.target.composing||(t.number=e.target.value)}}}),r("label",{attrs:{for:"file"}},[t._v("Загрузите фото блюда:")]),r("input",{staticClass:"new-product__input",attrs:{id:"file",type:"file",disabled:!t.isEditing},on:{change:t.handleFileUpload}}),r("label",{attrs:{for:"user-profile__info"}},[t._v("О себе:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.info,expression:"info"}],staticClass:"user-profile__input",attrs:{id:"user-profile__info",type:"text",disabled:!t.isEditing},domProps:{value:t.info},on:{input:function(e){e.target.composing||(t.info=e.target.value)}}})]),t.isEditing?r("app-button",{attrs:{value:"Сохранить"},nativeOn:{click:function(e){return t.updateUserData(e)}}}):r("app-button",{attrs:{value:"Редактировать"},nativeOn:{click:function(e){return t.editUserData(e)}}}),t.loadedData?t._e():r("app-loading")],1)},dr=[],vr={components:{appButton:re,appLoading:Te},data:function(){return{user:null,name:"",address:"",email:"",number:"",info:"",isEditing:!1,file:null,loadedData:!1}},methods:{editUserData:function(){this.isEditing=!this.isEditing},getUserData:function(){var t=this;Ct(this.$store.state.authorization.idToken).then((function(e){t.loadedData=!0;var r=e.data;t.setUserData(r)})).catch((function(t){return console.log(t)}))},setUserData:function(t){this.user=t,this.name=t.name,this.address=t.address,this.email=t.email,this.number=t.number,this.info=t.info},updateUserData:function(){if(this.user.name=this.name,this.user.address=this.address,this.user.email=this.email,this.user.number=this.number,this.user.info=this.info,this.file){var t=new FormData;t.append("files",this.file),this.saveNewProfilePicture(t)}else this.saveUserData(this.user);this.$router.go()},saveNewProfilePicture:function(t){var e=this;kt(this.$store.state.authorization.idToken,t).then((function(t){var r=t.data[0].id;e.user.image=r,e.saveUserData(e.user)})).catch((function(t){return console.log(t)}))},saveUserData:function(t){xt(this.$store.state.authorization.idToken,this.$store.state.authorization.userId,t).then((function(t){console.log(t)})).catch((function(t){return console.log(t)}))},handleFileUpload:function(t){var e=Object(Le["a"])(t.target.files,1);this.file=e[0]}},beforeRouteEnter:function(t,e,r){r((function(t){t.getUserData()}))}},fr=vr,mr=(r("427e"),Object(k["a"])(fr,pr,dr,!1,null,null,null)),hr=mr.exports,_r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"cooker-profile"},[t.user.image[0]?r("img",{staticClass:"cooker-profile__img",attrs:{src:"https://strapi.kameas.ru"+t.user.image[0].url,alt:""}}):r("img",{staticClass:"cooker-profile__img",attrs:{src:"https://strapi.kameas.ru/uploads/empty_profile_536f5a8db1.png"}}),r("div",{staticClass:"spacer"}),r("div",{staticClass:"container"},[r("div",{staticClass:"headline"},[t._v(" "+t._s(t.user.name)+" ")]),r("div",{staticClass:"cooker-profile__description"},[t._v(" "+t._s(t.user.info)+" ")]),t.hasProducts?r("div",{staticClass:"cooker-profile__current-dishes"},[r("div",{staticClass:"headline"},[t._v(" "+t._s(t.user.name)+" - блюда ")]),t._l(t.products,(function(t){return r("app-product-preview",{key:t.id,attrs:{product:t}})}))],2):t._e(),t.hasProducts?r("div",{staticClass:"cooker-profile__prev-dishes"},[r("div",{staticClass:"headline"},[t._v(" "+t._s(t.user.name)+" - прошлые блюда ")]),t._l(t.prevProducts,(function(t){return r("app-product-preview",{key:t.id,attrs:{product:t}})}))],2):t._e(),!t.hasProducts&&t.loadedData?r("div",[t._v(" У данного пользователя еще нет продуктов. ")]):t._e()])]),t.loadedData?t._e():r("app-loading")],1)},gr=[],wr={components:{appProductPreview:Oe,appLoading:Te},data:function(){return{user:null,products:[],prevProducts:[],hasProducts:!1,loadedData:!1}},methods:{getUserData:function(t){var e=this;ot.get("users?id=".concat(t),{headers:{Authorization:"Bearer ".concat(this.$store.state.authorization.idToken)}}).then((function(t){var r=Object(Le["a"])(t.data,1);e.user=r[0],e.getUserProducts(e.user.id)})).catch((function(t){return console.log(t)}))},getUserProducts:function(t){var e=this;ot.get("products?author=".concat(t),{headers:{Authorization:"Bearer ".concat(this.$store.state.authorization.idToken)}}).then((function(t){if(e.loadedData=!0,t.data.length>0){e.hasProducts=!0;var r=t.data;e.products=r.filter((function(t){return!0===t.active})),e.prevProducts=r.filter((function(t){return!1===t.active}))}else e.hasProducts=!1})).catch((function(t){return console.log(t)}))}},beforeRouteEnter:function(t,e,r){r((function(t){t.getUserData(t.$route.params.id)}))}},br=wr,Cr=(r("72ff"),Object(k["a"])(br,_r,gr,!1,null,null,null)),yr=Cr.exports,kr=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},$r=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"ready__container"},[r("i",{staticClass:"fas fa-check-circle"}),r("div",{staticClass:"headline"},[t._v(" Готово! ")])])}],xr=(r("5664"),{}),Or=Object(k["a"])(xr,kr,$r,!1,null,null,null),Pr=Or.exports;function jr(t,e,r){return Rr.apply(this,arguments)}function Rr(){return Rr=Object(f["a"])(regeneratorRuntime.mark((function t(e,r,a){var n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=!1,t.next=3,M();case 3:return i=t.sent,t.next=6,K();case 6:if(s=t.sent,i&&s&&(n=!0),"/"!==e.path&&"/signin"!==e.path&&"/signup"!==e.path){t.next=18;break}if(!n){t.next=15;break}return t.next=12,zt.dispatch("tryAutoLogin",{idToken:i,userId:s});case 12:a("/products"),t.next=16;break;case 15:a();case 16:t.next=25;break;case 18:if(!n){t.next=24;break}return t.next=21,zt.dispatch("tryAutoLogin",{idToken:i,userId:s});case 21:a(),t.next=25;break;case 24:a("/signin");case 25:case"end":return t.stop()}}),t)}))),Rr.apply(this,arguments)}a["default"].use(Bt["a"]);var Er=[{path:"/",component:Kt},{path:"/signin",component:se,beforeEnter:jr},{path:"/signup",component:de,beforeEnter:jr},{path:"/settings",name:"UserProfile",component:hr,props:!0,beforeEnter:jr},{path:"/profile/:id",name:"CookerProfile",component:yr,props:!0,beforeEnter:jr},{path:"/products",name:"Products",component:Ae,beforeEnter:jr},{path:"/products/:id",name:"ProductDetails",component:Je,props:!0,beforeEnter:jr},{path:"/cart",component:lr,beforeEnter:jr},{path:"/new-product",component:Ye,beforeEnter:jr},{path:"/confirm",component:Pr,beforeEnter:jr},{path:"*",redirect:"/"}],Dr=new Bt["a"]({mode:"history",routes:Er}),Ir=(r("bbe3"),r("8019"));a["default"].component("file-upload",Ir),a["default"].config.productionTip=!1,a["default"].use(i.a),a["default"].use(o.a),a["default"].use(c.a),a["default"].use(p.a,{}),new a["default"]({render:function(t){return t(Lt)},router:Dr,store:zt}).$mount("#app")},"60ae":function(t,e,r){},6871:function(t,e,r){t.exports=r.p+"img/logo_2.d4c64e41.png"},"72ff":function(t,e,r){"use strict";var a=r("5047"),n=r.n(a);n.a},"74c8":function(t,e,r){"use strict";var a=r("3e47"),n=r.n(a);n.a},"7fc1":function(t,e,r){"use strict";var a=r("1e31"),n=r.n(a);n.a},8274:function(t,e,r){"use strict";var a=r("d277"),n=r.n(a);n.a},8358:function(t,e,r){},8394:function(t,e,r){},"85ec":function(t,e,r){},"860f":function(t,e,r){"use strict";var a=r("25f3"),n=r.n(a);n.a},"8f99":function(t,e,r){},a216:function(t,e,r){},a887:function(t,e,r){"use strict";var a=r("ee6e"),n=r.n(a);n.a},abd8:function(t,e,r){"use strict";var a=r("e4fa"),n=r.n(a);n.a},d277:function(t,e,r){},e22a:function(t,e,r){"use strict";var a=r("8394"),n=r.n(a);n.a},e4fa:function(t,e,r){},e70b:function(t,e,r){},eb0a:function(t,e,r){"use strict";var a=r("f920"),n=r.n(a);n.a},ee6e:function(t,e,r){},f920:function(t,e,r){}});
//# sourceMappingURL=app.b2faa449.js.map