(function(t){function e(e){for(var n,s,o=e[0],u=e[1],c=e[2],p=0,d=[];p<o.length;p++)s=o[p],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);l&&l(e);while(d.length)d.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],n=!0,o=1;o<r.length;o++){var u=r[o];0!==a[u]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},a={app:0},i=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var n=r("85ec"),a=r.n(n);a.a},1178:function(t,e,r){"use strict";var n=r("60ae"),a=r.n(n);a.a},"11fc":function(t,e,r){"use strict";var n=r("8358"),a=r.n(n);a.a},"1e31":function(t,e,r){},"25f3":function(t,e,r){},2632:function(t,e,r){},3198:function(t,e,r){},3257:function(t,e,r){"use strict";var n=r("a216"),a=r.n(n);a.a},"3e47":function(t,e,r){},"427e":function(t,e,r){"use strict";var n=r("2632"),a=r.n(n);a.a},"477b":function(t,e,r){"use strict";var n=r("3198"),a=r.n(n);a.a},5047:function(t,e,r){},5664:function(t,e,r){"use strict";var n=r("e70b"),a=r.n(n);a.a},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=r("1dce"),i=r.n(a),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("app-header"),r("router-view")],1)},o=[],u=(r("ac1f"),r("5319"),r("96cf"),r("1da1")),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"header",attrs:{id:"header"}},[n("div",{staticClass:"header__container"},[n("router-link",{staticClass:"header__logo",attrs:{"data-scroll":"#intro",tag:"div",to:"/products"}},[n("img",{attrs:{src:r("6871"),alt:""}})]),n("div",{staticClass:"header__nav"},[t.showNav?n("app-nav"):t._e()],1),n("div",{staticClass:"header__actions"},[n("router-link",{staticClass:"header__cart",attrs:{to:"/cart"}},[n("i",{staticClass:"fas fa-shopping-cart"}),t._v(" ("+t._s(t.productsAmount)+") ")]),n("app-nav-toggle",{attrs:{"is-active":t.showNav},nativeOn:{click:function(e){return t.showNavigation(e)}}})],1)],1)])},l=[],p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nav",{staticClass:"nav",attrs:{id:"nav"}},[r("router-link",{staticClass:"nav__link",attrs:{to:"/products"}},[t._v(" Продукты ")]),r("router-link",{staticClass:"nav__link",attrs:{to:"/settings"}},[t._v(" Настройки ")]),r("router-link",{staticClass:"nav__link",attrs:{to:"/profile/"+t.userId}},[t._v(" Мой профиль ")]),r("router-link",{staticClass:"nav__link",attrs:{to:"/new-product"}},[t._v(" Продать блюдо ")]),r("router-link",{staticClass:"nav__link",attrs:{to:"/cart"}},[t._v(" Корзина ("),r("span",[t._v("0")]),t._v(") ")]),t.isAuthorized?r("div",{staticClass:"nav__link",on:{click:t.signout}},[t._v(" Выйти ")]):t._e()],1)},d=[],m={computed:{isAuthorized:function(){return this.$store.getters.isAuthorized},userId:function(){return this.$store.state.authorization.userId}},methods:{signout:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("signout");case 2:t.$router.replace("/signin");case 3:case"end":return e.stop()}}),e)})))()}}},v=m,f=(r("abd8"),r("2877")),h=Object(f["a"])(v,p,d,!1,null,null,null),_=h.exports,g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"nav-toggle",class:{active:t.isActive},attrs:{id:"nav-toggle"}},[t._m(0)])},w=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"nav-toggle__button",attrs:{type:"button"}},[r("span",{staticClass:"nav-toggle__item"},[r("span")])])}],b={props:{isActive:{type:Boolean,default:!1}}},C=b,y=(r("1178"),Object(f["a"])(C,g,w,!1,null,null,null)),k=y.exports,x={components:{appNav:_,appNavToggle:k},data:function(){return{showNav:!1}},computed:{productsAmount:function(){return this.$store.state.cart.cart.length}},watch:{$route:function(){this.showNav=!1}},methods:{showNavigation:function(){this.showNav=!this.showNav}}},P=x,O=(r("477b"),Object(f["a"])(P,c,l,!1,null,null,null)),j=O.exports,R=r("2f62"),$="idToken";function I(t){return E.apply(this,arguments)}function E(){return E=Object(u["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.setItem($,e));case 1:case"end":return t.stop()}}),t)}))),E.apply(this,arguments)}function N(){return T.apply(this,arguments)}function T(){return T=Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.getItem($));case 1:case"end":return t.stop()}}),t)}))),T.apply(this,arguments)}function z(){return U.apply(this,arguments)}function U(){return U=Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.removeItem($));case 1:case"end":return t.stop()}}),t)}))),U.apply(this,arguments)}var D="userId";function S(t){return A.apply(this,arguments)}function A(){return A=Object(u["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:localStorage.setItem(D,e);case 1:case"end":return t.stop()}}),t)}))),A.apply(this,arguments)}function M(){return B.apply(this,arguments)}function B(){return B=Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.getItem(D));case 1:case"end":return t.stop()}}),t)}))),B.apply(this,arguments)}function F(){return L.apply(this,arguments)}function L(){return L=Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:localStorage.removeItem(D);case 1:case"end":return t.stop()}}),t)}))),L.apply(this,arguments)}var J="cart";function q(t){return H.apply(this,arguments)}function H(){return H=Object(u["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.setItem(J,e));case 1:case"end":return t.stop()}}),t)}))),H.apply(this,arguments)}function G(){return K.apply(this,arguments)}function K(){return K=Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.getItem(J));case 1:case"end":return t.stop()}}),t)}))),K.apply(this,arguments)}var Q=r("bc3a"),V=r.n(Q),W=V.a.create({baseURL:"https://strapi.kameas.ru/"}),X=W;function Y(t){return Z.apply(this,arguments)}function Z(){return Z=Object(u["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",X.post("auth/local",{identifier:e.email,password:e.password}));case 1:case"end":return t.stop()}}),t)}))),Z.apply(this,arguments)}r("b0c0");function tt(t){return et.apply(this,arguments)}function et(){return et=Object(u["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",X.post("auth/local/register",{username:e.login,email:e.email,password:e.password,name:e.name}));case 1:case"end":return t.stop()}}),t)}))),et.apply(this,arguments)}function rt(t,e){return nt.apply(this,arguments)}function nt(){return nt=Object(u["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",X.post("products",e,{headers:{Authorization:"Bearer ".concat(r)}}));case 1:case"end":return t.stop()}}),t)}))),nt.apply(this,arguments)}function at(t,e){return it.apply(this,arguments)}function it(){return it=Object(u["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",X.post("upload",e,{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"multipart/form-data"}}));case 1:case"end":return t.stop()}}),t)}))),it.apply(this,arguments)}function st(t){return ot.apply(this,arguments)}function ot(){return ot=Object(u["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",X.get("products",{headers:{Authorization:"Bearer ".concat(e)}}));case 1:case"end":return t.stop()}}),t)}))),ot.apply(this,arguments)}function ut(t,e){return ct.apply(this,arguments)}function ct(){return ct=Object(u["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",X.put("products/".concat(e.id),e,{headers:{Authorization:"Bearer ".concat(r)}}));case 1:case"end":return t.stop()}}),t)}))),ct.apply(this,arguments)}function lt(t,e){return pt.apply(this,arguments)}function pt(){return pt=Object(u["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",X.get("users?id=".concat(r),{headers:{Authorization:"Bearer ".concat(e)}}));case 1:case"end":return t.stop()}}),t)}))),pt.apply(this,arguments)}function dt(t,e){return mt.apply(this,arguments)}function mt(){return mt=Object(u["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",X.post("upload",r,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"}}));case 1:case"end":return t.stop()}}),t)}))),mt.apply(this,arguments)}function vt(t,e,r){return ft.apply(this,arguments)}function ft(){return ft=Object(u["a"])(regeneratorRuntime.mark((function t(e,r,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",X.put("users/".concat(r),n,{headers:{Authorization:"Bearer ".concat(e)}}));case 1:case"end":return t.stop()}}),t)}))),ft.apply(this,arguments)}n["a"].use(R["a"]);var ht={idToken:null,userId:null,user:null},_t={authUser:function(t,e){t.idToken=e.idToken,t.userId=e.userId},storeUser:function(t,e){t.user=e},clearAuthData:function(t){t.idToken=null,t.userId=null}},gt={signin:function(t,e){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.commit,r.next=3,Y(e);case 3:a=r.sent,n("authUser",{idToken:a.data.jwt,userId:a.data.user.id}),n("storeUser",{email:e.email,password:e.password,userId:a.data.user.id,idToken:a.data.jwt}),I(a.data.jwt),S(a.data.user.id);case 8:case"end":return r.stop()}}),r)})))()},signup:function(t,e){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.commit,r.next=3,tt(e);case 3:a=r.sent,n("authUser",{idToken:a.data.jwt,userId:a.data.user.id}),n("storeUser",{email:e.email,password:e.password,userId:a.data.user.id}),I(a.data.jwt),S(a.data.user.id);case 8:case"end":return r.stop()}}),r)})))()},signout:function(t){var e=t.commit;e("clearAuthData"),z(),F()},tryAutoLogin:function(t,e){return Object(u["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=t.commit,e.idToken){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,n("authUser",{idToken:e.idToken,userId:e.userId});case 5:case"end":return r.stop()}}),r)})))()}},wt={isAuthorized:function(t){return null!==t.userId},user:function(t){return t.user}},bt={state:ht,mutations:_t,actions:gt,getters:wt},Ct=(r("c740"),{cart:[]}),yt={addItemToCart:function(t,e){console.log(t.cart);var r=t.cart.findIndex((function(t){return t.id===e.id}));r>=0?t.cart[r].count+=1:t.cart.push(e)},saveCart:function(t,e){t.cart=e}},kt={addItemToCart:function(t,e){var r=t.commit,n=t.dispatch,a=t.$state;r("addItemToCart",e),n("saveCart",a.cart)},saveCart:function(t,e){var r=t.commit;r("saveCart",e),q(JSON.stringify(e))},getCart:function(t){var e=t.commit,r=JSON.parse(G());e("saveCart",r)}},xt={cart:function(t){return t.cart}},Pt={state:Ct,mutations:yt,actions:kt,getters:xt},Ot=(r("4de4"),{products:[]}),jt={saveProducts:function(t,e){t.products=e}},Rt={saveNewProduct:function(t,e){var r=t.commit,n=t.rootState;rt(e,n.authorization.idToken).then((function(t){console.log(t),r("doSmth")})).catch((function(t){return console.log(t)}))},saveNewPicture:function(t,e){var r=t.dispatch,n=t.rootState;at(e.formData,n.authorization.idToken).then((function(t){var n=t.data[0].id;e.newProduct.image=n,r("saveNewProduct",e.newProduct)})).catch((function(t){return console.log(t)}))},fetchProducts:function(t){var e=t.commit,r=t.rootState;st(r.authorization.idToken).then((function(t){var r=t.data,n=r.filter((function(t){return!0===t.active}));e("saveProducts",n)})).catch((function(t){return console.log(t)}))},removeProduct:function(t,e){var r=t.rootState;e.active=!1,ut(r.authorization.idToken,e).then((function(t){console.log(t)})).catch((function(t){return console.log(t)}))}},$t={productList:function(t){return t.products}},It={state:Ot,mutations:jt,actions:Rt,getters:$t};n["a"].use(R["a"]),n["a"].use(R["a"]);var Et=new R["a"].Store({actions:{},modules:{authorization:bt,cart:Pt,product:It}}),Nt={name:"App",components:{appHeader:j},data:function(){return{test:"pepe"}},created:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=localStorage.getItem("path"),!r){e.next=5;break}return localStorage.removeItem("path"),t.$router.replace(r),e.abrupt("return");case 5:return e.next=7,N();case 7:return n=e.sent,e.next=10,M();case 10:return a=e.sent,e.next=13,Et.dispatch("tryAutoLogin",{idToken:n,userId:a});case 13:case"end":return e.stop()}}),e)})))()}},Tt=Nt,zt=(r("034f"),Object(f["a"])(Tt,s,o,!1,null,null,null)),Ut=zt.exports,Dt=r("8c4f"),St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"welcome",attrs:{id:"welcome"}},[n("div",{staticClass:"container"},[n("img",{staticClass:"welcome-logo",attrs:{src:r("6871"),alt:""}}),n("h1",{staticClass:"welcome-headline"},[t._v(" Накорми соседа! ")]),n("div",{staticClass:"welcome-links"},[n("router-link",{staticClass:"welcome-link",attrs:{to:"/signin"}},[t._v(" Войти ")]),n("router-link",{staticClass:"welcome-link",attrs:{to:"/signup"}},[t._v(" Зарегистрироваться ")])],1)])])},At=[],Mt=(r("3257"),{}),Bt=Object(f["a"])(Mt,St,At,!1,null,null,null),Ft=Bt.exports,Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"signin"},[n("div",{staticClass:"container"},[n("img",{staticClass:"signin__logo",attrs:{src:r("6871"),alt:""}}),n("form",{staticClass:"signin__form",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[n("div",{staticClass:"headline"},[t._v(" Вход ")]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"signin__label",attrs:{for:"login"}},[t._v("E-mail:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"login",type:"text"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"signin__label",attrs:{for:"password"}},[t._v("Пароль:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("div",{staticClass:"spacer"}),n("app-button",{attrs:{value:t.value}})],1)])])},Jt=[],qt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"button"},[t._v(" "+t._s(t.value)+" ")])},Ht=[],Gt={props:{value:{type:String,default:null}}},Kt=Gt,Qt=(r("8274"),Object(f["a"])(Kt,qt,Ht,!1,null,null,null)),Vt=Qt.exports,Wt={components:{appButton:Vt},data:function(){return{value:"Войти",email:"",password:""}},methods:{onSubmit:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("signin",{email:t.email,password:t.password});case 2:t.$router.replace("/products");case 3:case"end":return e.stop()}}),e)})))()}}},Xt=Wt,Yt=(r("11fc"),Object(f["a"])(Xt,Lt,Jt,!1,null,null,null)),Zt=Yt.exports,te=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"signup"},[n("div",{staticClass:"container"},[n("img",{staticClass:"signup__logo",attrs:{src:r("6871"),alt:""}}),n("form",{staticClass:"signup__form",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[n("div",{staticClass:"headline"},[t._v(" Регистрация ")]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"signup__label",attrs:{for:"name"}},[t._v("Ваше имя:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{id:"name",type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"signup__label",attrs:{for:"login"}},[t._v("Придумайте логин:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],attrs:{id:"login",type:"text"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"signup__label",attrs:{for:"email"}},[t._v("Ваш e-mail:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"email",type:"text"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"signup__label",attrs:{for:"password"}},[t._v("Придумайте пароль:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"signup__label",attrs:{for:"confirmPassword"}},[t._v("Повторите пароль:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPassword,expression:"confirmPassword"}],attrs:{id:"confirmPassword",type:"password"},domProps:{value:t.confirmPassword},on:{input:function(e){e.target.composing||(t.confirmPassword=e.target.value)}}})]),n("div",{staticClass:"spacer"}),n("app-button",{attrs:{value:t.value}})],1)])])},ee=[],re={components:{appButton:Vt},data:function(){return{value:"Зарегистрироваться",name:"",login:"",email:"",password:"",confirmPassword:""}},methods:{onSubmit:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("signup",{name:t.name,login:t.login,email:t.email,password:t.password});case 2:t.$router.replace("/products");case 3:case"end":return e.stop()}}),e)})))()}}},ne=re,ae=(r("74c8"),Object(f["a"])(ne,te,ee,!1,null,null,null)),ie=ae.exports,se=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"products"},[r("div",{staticClass:"spacer"}),t._l(t.products,(function(t){return r("app-product-preview",{key:t.id,attrs:{product:t}})}))],2)])},oe=[],ue=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("router-link",{staticClass:"product-preview",attrs:{to:{name:"ProductDetails",params:{id:t.product.id}}}},[r("img",{staticClass:"product-preview__img",attrs:{src:"https://strapi.kameas.ru"+t.product.image[0].url,alt:""}}),r("div",{staticClass:"product-preview__info"},[r("div",{staticClass:"product-preview__name"},[t._v(" "+t._s(t.product.name)+" ")]),r("div",{staticClass:"product-preview__price"},[t._v(" "+t._s(t.product.price)+" руб. ")])])])],1)},ce=[],le={props:{product:{type:Object,default:function(){return{}}}}},pe=le,de=(r("eb0a"),Object(f["a"])(pe,ue,ce,!1,null,null,null)),me=de.exports,ve={components:{appProductPreview:me},computed:{products:function(){return this.$store.getters.productList}},methods:{},beforeRouteEnter:function(t,e,r){console.log(123),r((function(t){t.$store.dispatch("fetchProducts")}))}},fe=ve,he=(r("860f"),Object(f["a"])(fe,se,oe,!1,null,null,null)),_e=he.exports,ge=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.product?r("div",{staticClass:"product-detail"},[r("img",{staticClass:"product-detail__img",attrs:{src:"https://strapi.kameas.ru"+t.product.image[0].url,alt:""}}),r("div",{staticClass:"container"},[r("div",{staticClass:"product-detail__info"},[r("div",{staticClass:"product-detail__name"},[t._v(" "+t._s(t.product.name)+" ")]),r("div",{staticClass:"product-detail__price"},[t._v(" "+t._s(t.product.price)+" руб. ")])]),r("router-link",{staticClass:"product-detail__author",attrs:{to:{name:"CookerProfile",params:{id:t.product.author.id}}}},[r("div",{staticClass:"product-detail__author-img",style:{backgroundImage:"url(https://strapi.kameas.ru"+t.product.author.image[0].url+")"}}),r("div",{staticClass:"product-detail__author-name"},[t._v(" "+t._s(t.product.author.name)+" ")])]),r("div",{staticClass:"product-detail__description"},[t._v(" "+t._s(t.product.description)+" ")]),r("div",{staticClass:"product-detail__details"},[r("table",{staticClass:"product-detail__payments"},[r("tr",[r("td",[t._v("Оплата:")]),r("td",[t._v(t._s(t.paymentMethod))])]),r("tr",[r("td",[t._v("Доставка:")]),r("td",[t._v(t._s(t.delivery))])]),r("tr",[r("td",[t._v("Для веганов:")]),r("td",[t._v(t._s(t.vegan))])])])]),t.product.active?r("app-button",{attrs:{value:t.value},nativeOn:{click:function(e){return t.addItemToCart(e)}}}):t._e(),r("div",{staticClass:"spacer"}),t.authUser&&t.product.active?r("app-button",{attrs:{value:"Закрыть объявление"},nativeOn:{click:function(e){return t.removeProduct(e)}}}):t._e()],1)]):t._e()},we=[],be=r("3835"),Ce={components:{appButton:Vt},data:function(){return{value:"Добавить в корзину",product:null}},computed:{paymentMethod:function(){return"cash"===this.product.paymentMethod?"Наличные":"Перевод на карту"},delivery:function(){return"pickUp"===this.product.delivery?"Забрать у меня":"Доставлю на дом"},vegan:function(){return this.product.vegan?"Да":"Нет"},authUser:function(){return this.product.author.id===this.$store.state.authorization.userId}},created:function(){this.getProductData(this.$route.params.id)},methods:{getProductData:function(t){var e=this;X.get("products?id=".concat(t),{headers:{Authorization:"Bearer ".concat(this.$store.state.authorization.idToken)}}).then((function(t){var r=Object(be["a"])(t.data,1);e.product=r[0]})).catch((function(t){return console.log(t)}))},addItemToCart:function(){var t={name:this.product.name,price:this.product.price,image:this.product.image,count:1,id:this.product.id};this.$store.dispatch("addItemToCart",t)},removeProduct:function(){this.$store.dispatch("removeProduct",this.product)}}},ye=Ce,ke=(r("a887"),Object(f["a"])(ye,ge,we,!1,null,null,null)),xe=ke.exports,Pe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"spacer"}),r("div",{staticClass:"headline"},[t._v(" Новое блюдо ")]),r("form",{ref:"uploadForm",staticClass:"new-product",attrs:{action:""}},[r("label",{attrs:{for:"new-product__name"}},[t._v("Название:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"new-product__input",attrs:{id:"new-product__name",type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),r("label",{attrs:{for:"new-product__price"}},[t._v("Цена:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],staticClass:"new-product__input",attrs:{id:"new-product__price",type:"text"},domProps:{value:t.price},on:{input:function(e){e.target.composing||(t.price=e.target.value)}}}),r("label",{attrs:{for:"file"}},[t._v("Загрузите фото блюда:")]),r("input",{staticClass:"new-product__input",attrs:{id:"file",type:"file"},on:{change:t.handleFileUpload}}),r("label",{attrs:{for:"new-product__info"}},[t._v("Описание:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"new-product__input",attrs:{id:"new-product__info",type:"text"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),r("label",{attrs:{for:"new-product__payment-method"}},[t._v("Предпочитаемый способ оплаты:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.chosenPaymentMethod,expression:"chosenPaymentMethod"}],attrs:{id:"new-product__payment-method"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.chosenPaymentMethod=e.target.multiple?r:r[0]}}},[r("option",[t._v("Перевод на карту")]),r("option",[t._v("Наличными")])]),r("label",{attrs:{for:"new-product__delivery"}},[t._v("Доставка:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.chosenDeliveryMethod,expression:"chosenDeliveryMethod"}],attrs:{id:"new-product__delivery"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.chosenDeliveryMethod=e.target.multiple?r:r[0]}}},[r("option",[t._v("На дом")]),r("option",[t._v("Забрать у меня")])]),r("label",[t._v("Для веганов:")]),r("div",{staticClass:"new-product__vegan"},[r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.vegan,expression:"vegan"}],attrs:{id:"yes",type:"radio",value:"true"},domProps:{checked:t._q(t.vegan,"true")},on:{change:function(e){t.vegan="true"}}}),r("label",{attrs:{for:"yes"}},[t._v("Да")])]),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.vegan,expression:"vegan"}],attrs:{id:"no",type:"radio",value:"false"},domProps:{checked:t._q(t.vegan,"false")},on:{change:function(e){t.vegan="false"}}}),r("label",{attrs:{for:"no"}},[t._v("Нет")])])])]),r("div",{staticClass:"spacer"}),r("app-button",{attrs:{value:t.value},nativeOn:{click:function(e){return t.saveProduct(e)}}})],1)},Oe=[],je=(r("a4d3"),r("e01a"),{components:{appButton:Vt},data:function(){return{value:"Сохранить",name:"",description:"",price:null,chosenPaymentMethod:"",chosenDeliveryMethod:"",vegan:!1,file:""}},computed:{author:function(){return this.$store.state.authorization.userId},delivery:function(){return"На дом"===this.chosenDeliveryMethod?"deliveryToHome":"pickUp"},paymentMethod:function(){return"Наличные"===this.chosenPaymentMethod?"cash":"card"}},methods:{saveProduct:function(){console.log("Продукт сохранен!"),console.log(this.author);var t={name:this.name,description:this.description,price:this.price,paymentMethod:this.paymentMethod,delivery:this.delivery,vegan:this.vegan,author:this.author,active:!0},e=new FormData;e.append("files",this.file),this.$store.dispatch("saveNewPicture",{formData:e,newProduct:t}),this.$router.replace("/products")},handleFileUpload:function(){var t=Object(be["a"])(this.$refs.uploadForm.file.files,1);this.file=t[0]}}}),Re=je,$e=(r("7fc1"),Object(f["a"])(Re,Pe,Oe,!1,null,null,null)),Ie=$e.exports,Ee=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"spacer"}),t.cart?r("div",[r("div",{staticClass:"headline"},[t._v(" Корзина ")]),t._l(t.cart,(function(e){return r("app-cart-item",{key:e.id,attrs:{item:e}},[t._v(" "+t._s(t.cart)+" ")])})),r("div",{staticClass:"spacer"}),r("app-button",{attrs:{value:"Подтвердить"},nativeOn:{click:function(e){return t.confirmCart(e)}}}),r("div",{staticClass:"spacer"}),r("app-button",{attrs:{value:"Очистить корзину"},nativeOn:{click:function(e){return t.clearCart(e)}}})],2):r("div",[t._v(" Здесь пока ничего нет... ")])])},Ne=[],Te=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"product-preview product-preview_type_vertical"},[r("div",{staticClass:"product-preview__description"},[r("img",{attrs:{src:"https://strapi.kameas.ru"+t.item.image[0].url,alt:""}}),r("div",{staticClass:"product-preview__info"},[r("div",{staticClass:"product-preview__name"},[t._v(" "+t._s(t.item.name)+" ")]),r("div",{staticClass:"product-preview__price"},[t._v(" "+t._s(t.item.price)+" руб. ")])])]),r("div",{staticClass:"product-preview__prices"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],staticClass:"product-preview__amount",attrs:{type:"number",min:"0",step:"1"},domProps:{value:t.count},on:{input:function(e){e.target.composing||(t.count=e.target.value)}}}),r("div",{staticClass:"product-preview__sum"},[t._v(" "+t._s(t.item.price*t.item.count)+" руб. ")])]),r("div",{staticClass:"spacer"})])},ze=[],Ue={props:{item:{type:Object,default:function(){return{}}}},computed:{count:function(){return this.item.count}}},De=Ue,Se=(r("e22a"),Object(f["a"])(De,Te,ze,!1,null,null,null)),Ae=Se.exports,Me={components:{appCartItem:Ae,appButton:Vt},computed:{cart:function(){return this.$store.getters.cart}},methods:{confirmCart:function(){this.$router.replace("/confirm")},clearCart:function(){localStorage.removeItem("cart")}},beforeRouteEnter:function(t,e,r){r((function(t){t.$store.dispatch("getCart")}))}},Be=Me,Fe=Object(f["a"])(Be,Ee,Ne,!1,null,null,null),Le=Fe.exports,Je=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"spacer"}),r("div",{staticClass:"headline"},[t._v(" Профиль ")]),r("form",{staticClass:"user-profile",attrs:{action:""}},[r("label",{attrs:{for:"user-profile__name"}},[t._v("Имя:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"user-profile__input",attrs:{id:"user-profile__name",type:"text",disabled:!t.isEditing},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),r("label",{attrs:{for:"user-profile__address"}},[t._v("Адрес:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"user-profile__input",attrs:{id:"user-profile__address",type:"text",disabled:!t.isEditing},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}}),r("label",{attrs:{for:"user-profile__email"}},[t._v("Почта:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"user-profile__input",attrs:{id:"user-profile__email",type:"email",disabled:!t.isEditing},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),r("label",{attrs:{for:"user-profile__number"}},[t._v("Телефон:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.number,expression:"number"}],staticClass:"user-profile__input",attrs:{id:"user-profile__number",type:"text",disabled:!t.isEditing},domProps:{value:t.number},on:{input:function(e){e.target.composing||(t.number=e.target.value)}}}),r("label",{attrs:{for:"file"}},[t._v("Загрузите фото блюда:")]),r("input",{staticClass:"new-product__input",attrs:{id:"file",type:"file",disabled:!t.isEditing},on:{change:t.handleFileUpload}}),r("label",{attrs:{for:"user-profile__info"}},[t._v("О себе:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.info,expression:"info"}],staticClass:"user-profile__input",attrs:{id:"user-profile__info",type:"text",disabled:!t.isEditing},domProps:{value:t.info},on:{input:function(e){e.target.composing||(t.info=e.target.value)}}})]),t.isEditing?r("app-button",{attrs:{value:"Сохранить"},nativeOn:{click:function(e){return t.updateUserData(e)}}}):r("app-button",{attrs:{value:"Редактировать"},nativeOn:{click:function(e){return t.editUserData(e)}}})],1)},qe=[],He={components:{appButton:Vt},data:function(){return{user:null,name:"",address:"",email:"",number:"",info:"",isEditing:!1,file:null}},methods:{editUserData:function(){this.isEditing=!this.isEditing},getUserData:function(){var t=this;lt(this.$store.state.authorization.idToken,this.$store.state.authorization.userId).then((function(e){var r=e.data;console.log(r),t.setUserData(r[0])})).catch((function(t){return console.log(t)}))},setUserData:function(t){this.user=t,this.name=t.name,this.address=t.address,this.email=t.email,this.number=t.number,this.info=t.info},updateUserData:function(){this.user.name=this.name,this.user.address=this.address,this.user.email=this.email,this.user.number=this.number,this.user.info=this.info;var t=new FormData;t.append("files",this.file),this.saveNewProfilePicture(t)},saveNewProfilePicture:function(t){var e=this;dt(this.$store.state.authorization.idToken,t).then((function(t){var r=t.data[0].id;e.user.image=r,e.saveUserData(e.user)})).catch((function(t){return console.log(t)}))},saveUserData:function(t){vt(this.$store.state.authorization.idToken,this.$store.state.authorization.userId,t).then((function(t){console.log(t)})).catch((function(t){return console.log(t)}))},handleFileUpload:function(t){var e=Object(be["a"])(t.target.files,1);this.file=e[0]}},beforeRouteEnter:function(t,e,r){r((function(t){t.getUserData()}))}},Ge=He,Ke=(r("427e"),Object(f["a"])(Ge,Je,qe,!1,null,null,null)),Qe=Ke.exports,Ve=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.hasProducts?r("div",{staticClass:"cooker-profile"},[r("img",{staticClass:"cooker-profile__img",attrs:{src:"https://strapi.kameas.ru"+t.user.image[0].url,alt:""}}),r("div",{staticClass:"spacer"}),r("div",{staticClass:"container"},[r("div",{staticClass:"headline"},[t._v(" "+t._s(t.user.name)+" ")]),r("div",{staticClass:"cooker-profile__description"},[t._v(" "+t._s(t.user.info)+" ")]),r("div",{staticClass:"cooker-profile__current-dishes"},[r("div",{staticClass:"headline"},[t._v(" "+t._s(t.user.name)+" - блюда ")]),t._l(t.products,(function(t){return r("app-product-preview",{key:t.id,attrs:{product:t}})}))],2),r("div",{staticClass:"cooker-profile__prev-dishes"},[r("div",{staticClass:"headline"},[t._v(" "+t._s(t.user.name)+" - прошлые блюда ")]),t._l(t.prevProducts,(function(t){return r("app-product-preview",{key:t.id,attrs:{product:t}})}))],2)])]):r("div",[t._v(" У данного пользователя еще нет продуктов. ")])])},We=[],Xe={components:{appProductPreview:me},data:function(){return{user:null,products:[],prevProducts:[],hasProducts:!1}},methods:{getUserData:function(t){var e=this;X.get("users?id=".concat(t),{headers:{Authorization:"Bearer ".concat(this.$store.state.authorization.idToken)}}).then((function(t){var r=Object(be["a"])(t.data,1);e.user=r[0],e.getUserProducts(e.user.id)})).catch((function(t){return console.log(t)}))},getUserProducts:function(t){var e=this;X.get("products?author=".concat(t),{headers:{Authorization:"Bearer ".concat(this.$store.state.authorization.idToken)}}).then((function(t){if(t.data){e.hasProducts=!0;var r=t.data;e.products=r.filter((function(t){return!0===t.active})),e.prevProducts=r.filter((function(t){return!1===t.active}))}else e.hasProducts=!1})).catch((function(t){return console.log(t)}))}},beforeRouteEnter:function(t,e,r){r((function(t){t.getUserData(t.$route.params.id)}))}},Ye=Xe,Ze=(r("72ff"),Object(f["a"])(Ye,Ve,We,!1,null,null,null)),tr=Ze.exports,er=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},rr=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"ready__container"},[r("i",{staticClass:"fas fa-check-circle"}),r("div",{staticClass:"headline"},[t._v(" Готово! ")])])}],nr=(r("5664"),{}),ar=Object(f["a"])(nr,er,rr,!1,null,null,null),ir=ar.exports;function sr(t,e,r){return or.apply(this,arguments)}function or(){return or=Object(u["a"])(regeneratorRuntime.mark((function t(e,r,n){var a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=!1,t.next=3,N();case 3:return i=t.sent,t.next=6,M();case 6:if(s=t.sent,i&&s&&(a=!0),!a){t.next=14;break}return t.next=11,Et.dispatch("tryAutoLogin",{idToken:i,userId:s});case 11:n(),t.next=15;break;case 14:n("/signin");case 15:case"end":return t.stop()}}),t)}))),or.apply(this,arguments)}n["a"].use(Dt["a"]);var ur=[{path:"/",component:Ft},{path:"/signin",component:Zt},{path:"/signup",component:ie},{path:"/settings",component:Qe},{path:"/profile/:id",name:"CookerProfile",component:tr,props:!0,beforeEnter:sr},{path:"/products",name:"Products",component:_e,beforeEnter:sr},{path:"/products/:id",name:"ProductDetails",component:xe,props:!0,beforeEnter:sr},{path:"/cart",component:Le,beforeEnter:sr},{path:"/new-product",component:Ie,beforeEnter:sr},{path:"/confirm",component:ir,beforeEnter:sr},{path:"*",redirect:"/"}],cr=new Dt["a"]({mode:"history",routes:ur});n["a"].config.productionTip=!1,n["a"].use(i.a),new n["a"]({render:function(t){return t(Ut)},router:cr,store:Et}).$mount("#app")},"60ae":function(t,e,r){},6871:function(t,e,r){t.exports=r.p+"img/logo_2.d4c64e41.png"},"72ff":function(t,e,r){"use strict";var n=r("5047"),a=r.n(n);a.a},"74c8":function(t,e,r){"use strict";var n=r("3e47"),a=r.n(n);a.a},"7fc1":function(t,e,r){"use strict";var n=r("1e31"),a=r.n(n);a.a},8274:function(t,e,r){"use strict";var n=r("d277"),a=r.n(n);a.a},8358:function(t,e,r){},8394:function(t,e,r){},"85ec":function(t,e,r){},"860f":function(t,e,r){"use strict";var n=r("25f3"),a=r.n(n);a.a},a216:function(t,e,r){},a887:function(t,e,r){"use strict";var n=r("ee6e"),a=r.n(n);a.a},abd8:function(t,e,r){"use strict";var n=r("e4fa"),a=r.n(n);a.a},d277:function(t,e,r){},e22a:function(t,e,r){"use strict";var n=r("8394"),a=r.n(n);a.a},e4fa:function(t,e,r){},e70b:function(t,e,r){},eb0a:function(t,e,r){"use strict";var n=r("f920"),a=r.n(n);a.a},ee6e:function(t,e,r){},f920:function(t,e,r){}});
//# sourceMappingURL=app.f0521336.js.map