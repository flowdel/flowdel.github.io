(function(t){function e(e){for(var a,s,o=e[0],u=e[1],c=e[2],p=0,d=[];p<o.length;p++)s=o[p],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&d.push(n[s][0]),n[s]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);l&&l(e);while(d.length)d.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],a=!0,o=1;o<r.length;o++){var u=r[o];0!==n[u]&&(a=!1)}a&&(i.splice(e--,1),t=s(s.s=r[0]))}return t}var a={},n={app:0},i=[];function s(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=a,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(r,a,function(e){return t[e]}.bind(null,a));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var a=r("85ec"),n=r.n(a);n.a},1178:function(t,e,r){"use strict";var a=r("60ae"),n=r.n(a);n.a},"11fc":function(t,e,r){"use strict";var a=r("8358"),n=r.n(a);n.a},"1e31":function(t,e,r){},"25f3":function(t,e,r){},2632:function(t,e,r){},3198:function(t,e,r){},3257:function(t,e,r){"use strict";var a=r("a216"),n=r.n(a);n.a},"3c33":function(t,e,r){"use strict";var a=r("8f99"),n=r.n(a);n.a},"3e47":function(t,e,r){},"427e":function(t,e,r){"use strict";var a=r("2632"),n=r.n(a);n.a},"477b":function(t,e,r){"use strict";var a=r("3198"),n=r.n(a);n.a},"4f24":function(t,e,r){t.exports=r.p+"img/empty_profile.1141917d.png"},5047:function(t,e,r){},5664:function(t,e,r){"use strict";var a=r("e70b"),n=r.n(a);n.a},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=r("1dce"),i=r.n(n),s=r("ee98"),o=r.n(s),u=r("7212"),c=r.n(u),l=r("e166"),p=r.n(l),d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("app-header"),r("router-view"),r("notifications",{attrs:{group:"auth"}})],1)},v=[],f=(r("ac1f"),r("5319"),r("96cf"),r("1da1")),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"header",attrs:{id:"header"}},[a("div",{staticClass:"header__container"},[a("router-link",{staticClass:"header__logo",attrs:{"data-scroll":"#intro",tag:"div",to:"/products"}},[a("img",{attrs:{src:r("6871"),alt:""}})]),a("div",{staticClass:"header__nav"},[t.showNav?a("app-nav",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideNavigation,expression:"hideNavigation"}]}):t._e()],1),a("div",{staticClass:"header__actions"},[a("router-link",{staticClass:"header__cart",attrs:{to:"/cart"}},[a("i",{staticClass:"fas fa-shopping-cart"}),t._v(" ("+t._s(t.productsAmount)+") ")]),a("app-nav-toggle",{attrs:{"is-active":t.showNav},nativeOn:{click:function(e){return t.showNavigation(e)}}})],1)],1)])},h=[],_=r("5530"),g=r("e67d"),b=r.n(g),w=r("2f62"),C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nav",{staticClass:"nav",attrs:{id:"nav"}},[r("router-link",{staticClass:"nav__link",attrs:{to:"/products"}},[t._v(" Продукты ")]),r("router-link",{staticClass:"nav__link",attrs:{to:"/settings"}},[t._v(" Настройки ")]),r("router-link",{staticClass:"nav__link",attrs:{to:"/profile/"+t.userId}},[t._v(" Мой профиль ")]),r("router-link",{staticClass:"nav__link",attrs:{to:"/new-product"}},[t._v(" Продать блюдо ")]),r("router-link",{staticClass:"nav__link",attrs:{to:"/cart"}},[t._v(" Корзина ("),r("span",[t._v("0")]),t._v(") ")]),t.isAuthorized?r("div",{staticClass:"nav__link",on:{click:t.signout}},[t._v(" Выйти ")]):t._e()],1)},y=[],k={computed:Object(_["a"])(Object(_["a"])({},Object(w["c"])({userId:function(t){return t.authorization.userId}})),{},{isAuthorized:function(){return this.$store.getters.isAuthorized}}),methods:{signout:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("signout");case 2:t.$router.replace("/signin");case 3:case"end":return e.stop()}}),e)})))()}}},$=k,x=(r("abd8"),r("2877")),O=Object(x["a"])($,C,y,!1,null,null,null),j=O.exports,R=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"nav-toggle",class:{active:t.isActive},attrs:{id:"nav-toggle"}},[t._m(0)])},P=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"nav-toggle__button",attrs:{type:"button"}},[r("span",{staticClass:"nav-toggle__item"},[r("span")])])}],E={props:{isActive:{type:Boolean,default:!1}}},I=E,T=(r("1178"),Object(x["a"])(I,R,P,!1,null,null,null)),D=T.exports,U={components:{appNav:j,appNavToggle:D},directives:{ClickOutside:b.a},data:function(){return{showNav:!1}},computed:Object(_["a"])({},Object(w["c"])({productsAmount:function(t){return t.cart.cart.length}})),watch:{$route:function(){this.showNav=!1}},mounted:function(){this.popupItem=this.$el},methods:{showNavigation:function(){this.showNav=!this.showNav},hideNavigation:function(){this.showNav&&(this.showNav=!1)}}},N=U,S=(r("477b"),Object(x["a"])(N,m,h,!1,null,null,null)),A=S.exports,L="idToken";function M(t){return q.apply(this,arguments)}function q(){return q=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.setItem(L,e));case 1:case"end":return t.stop()}}),t)}))),q.apply(this,arguments)}function z(){return B.apply(this,arguments)}function B(){return B=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.getItem(L));case 1:case"end":return t.stop()}}),t)}))),B.apply(this,arguments)}function V(){return F.apply(this,arguments)}function F(){return F=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.removeItem(L));case 1:case"end":return t.stop()}}),t)}))),F.apply(this,arguments)}var G="userId";function H(t){return J.apply(this,arguments)}function J(){return J=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:localStorage.setItem(G,e);case 1:case"end":return t.stop()}}),t)}))),J.apply(this,arguments)}function Y(){return K.apply(this,arguments)}function K(){return K=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.getItem(G));case 1:case"end":return t.stop()}}),t)}))),K.apply(this,arguments)}function Q(){return W.apply(this,arguments)}function W(){return W=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:localStorage.removeItem(G);case 1:case"end":return t.stop()}}),t)}))),W.apply(this,arguments)}var X="cart";function Z(t){return tt.apply(this,arguments)}function tt(){return tt=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.setItem(X,e));case 1:case"end":return t.stop()}}),t)}))),tt.apply(this,arguments)}function et(){return rt.apply(this,arguments)}function rt(){return rt=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.getItem(X));case 1:case"end":return t.stop()}}),t)}))),rt.apply(this,arguments)}function at(){return nt.apply(this,arguments)}function nt(){return nt=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.removeItem(X));case 1:case"end":return t.stop()}}),t)}))),nt.apply(this,arguments)}r("4160"),r("d3b7"),r("159b");var it=r("bc3a"),st=r.n(it);a["default"].use(o.a);var ot=st.a.create({baseURL:"https://strapi.kameas.ru/"});ot.interceptors.response.use((function(t){return t}),(function(t){t.message.messages&&t.message.messages.forEach((function(e){a["default"].notify({group:"auth",type:"error",title:"ERROR",text:e}),Promise.reject(t)}))}));var ut=ot;function ct(t){return lt.apply(this,arguments)}function lt(){return lt=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ut.post("auth/local",{identifier:e.email,password:e.password}));case 1:case"end":return t.stop()}}),t)}))),lt.apply(this,arguments)}r("b0c0");function pt(t){return dt.apply(this,arguments)}function dt(){return dt=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ut.post("auth/local/register",{username:e.login,email:e.email,password:e.password,name:e.name}));case 1:case"end":return t.stop()}}),t)}))),dt.apply(this,arguments)}function vt(t,e){return ut.post("products",t,{headers:{Authorization:"Bearer ".concat(e)}})}function ft(t,e){return mt.apply(this,arguments)}function mt(){return mt=Object(f["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ut.post("upload",e,{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"multipart/form-data"}}));case 1:case"end":return t.stop()}}),t)}))),mt.apply(this,arguments)}function ht(t,e){return _t.apply(this,arguments)}function _t(){return _t=Object(f["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ut.get("products?_sort=createdAt:DESC&_start=".concat(r,"&_limit=10"),{headers:{Authorization:"Bearer ".concat(e)}}));case 1:case"end":return t.stop()}}),t)}))),_t.apply(this,arguments)}function gt(t,e){return bt.apply(this,arguments)}function bt(){return bt=Object(f["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ut.put("products/".concat(e.id),e,{headers:{Authorization:"Bearer ".concat(r)}}));case 1:case"end":return t.stop()}}),t)}))),bt.apply(this,arguments)}function wt(t,e){return Ct.apply(this,arguments)}function Ct(){return Ct=Object(f["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ut.get("products?id=".concat(e),{headers:{Authorization:"Bearer ".concat(r)}}));case 1:case"end":return t.stop()}}),t)}))),Ct.apply(this,arguments)}r("99af");function yt(t,e,r){return kt.apply(this,arguments)}function kt(){return kt=Object(f["a"])(regeneratorRuntime.mark((function t(e,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ut.get("products?author=".concat(e,"&active=").concat(a),{headers:{Authorization:"Bearer ".concat(r)}}));case 1:case"end":return t.stop()}}),t)}))),kt.apply(this,arguments)}function $t(t,e){return xt.apply(this,arguments)}function xt(){return xt=Object(f["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ut.get("users?id=".concat(r),{headers:{Authorization:"Bearer ".concat(e)}}));case 1:case"end":return t.stop()}}),t)}))),xt.apply(this,arguments)}function Ot(t,e){return jt.apply(this,arguments)}function jt(){return jt=Object(f["a"])(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ut.post("upload",r,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"}}));case 1:case"end":return t.stop()}}),t)}))),jt.apply(this,arguments)}function Rt(t,e,r){return Pt.apply(this,arguments)}function Pt(){return Pt=Object(f["a"])(regeneratorRuntime.mark((function t(e,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",ut.put("users/".concat(r),a,{headers:{Authorization:"Bearer ".concat(e)}}));case 1:case"end":return t.stop()}}),t)}))),Pt.apply(this,arguments)}a["default"].use(w["a"]);var Et={idToken:null,userId:null,user:null},It={authUser:function(t,e){t.idToken=e.idToken,t.userId=e.userId},storeUser:function(t,e){t.user=e},clearAuthData:function(t){t.idToken=null,t.userId=null}},Tt={signin:function(t,e){return Object(f["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.commit,r.prev=1,r.next=4,ct(e);case 4:n=r.sent,a("authUser",{idToken:n.data.jwt,userId:n.data.user.id}),a("storeUser",{email:e.email,password:e.password,userId:n.data.user.id,idToken:n.data.jwt}),M(n.data.jwt),H(n.data.user.id),r.next=13;break;case 11:r.prev=11,r.t0=r["catch"](1);case 13:case"end":return r.stop()}}),r,null,[[1,11]])})))()},signup:function(t,e){return Object(f["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.commit,r.next=3,pt(e);case 3:n=r.sent,a("authUser",{idToken:n.data.jwt,userId:n.data.user.id}),a("storeUser",{email:e.email,password:e.password,userId:n.data.user.id}),M(n.data.jwt),H(n.data.user.id);case 8:case"end":return r.stop()}}),r)})))()},signout:function(t){var e=t.commit;e("clearAuthData"),V(),Q()},tryAutoLogin:function(t,e){return Object(f["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=t.commit,e.idToken){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,a("authUser",{idToken:e.idToken,userId:e.userId});case 5:case"end":return r.stop()}}),r)})))()}},Dt={isAuthorized:function(t){return null!==t.userId},user:function(t){return t.user}},Ut={state:Et,mutations:It,actions:Tt,getters:Dt},Nt=(r("c740"),{cart:[]}),St={addItemToCart:function(t,e){var r=t.cart.findIndex((function(t){return t.id===e.id}));r>=0?t.cart[r].count+=1:t.cart.push(e)},saveCart:function(t,e){t.cart=e}},At={addItemToCart:function(t,e){var r=t.commit,a=t.dispatch;r("addItemToCart",e),a("saveCart",Nt.cart)},saveCart:function(t,e){var r=t.commit;r("saveCart",e),Z(JSON.stringify(e))},getCart:function(t){var e=t.commit;et().then((function(t){var r=JSON.parse(t);r&&e("saveCart",r)}))}},Lt={cart:function(t){return t.cart}},Mt={state:Nt,mutations:St,actions:At,getters:Lt};a["default"].use(w["a"]),a["default"].use(w["a"]);var qt=new w["a"].Store({actions:{},modules:{authorization:Ut,cart:Mt}}),zt={name:"App",components:{appHeader:A},created:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=localStorage.getItem("path"),!r){e.next=5;break}return localStorage.removeItem("path"),t.$router.replace(r),e.abrupt("return");case 5:return e.next=7,z();case 7:return a=e.sent,e.next=10,Y();case 10:return n=e.sent,e.next=13,qt.dispatch("tryAutoLogin",{idToken:a,userId:n});case 13:case"end":return e.stop()}}),e)})))()}},Bt=zt,Vt=(r("034f"),Object(x["a"])(Bt,d,v,!1,null,null,null)),Ft=Vt.exports,Gt=r("8c4f"),Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"welcome",attrs:{id:"welcome"}},[a("div",{staticClass:"container"},[a("img",{staticClass:"welcome-logo",attrs:{src:r("6871"),alt:""}}),a("h1",{staticClass:"welcome-headline"},[t._v(" Накорми соседа! ")]),a("div",{staticClass:"welcome-links"},[a("router-link",{staticClass:"welcome-link",attrs:{to:"/signin"}},[t._v(" Войти ")]),a("router-link",{staticClass:"welcome-link",attrs:{to:"/signup"}},[t._v(" Зарегистрироваться ")])],1)])])},Jt=[],Yt=(r("3257"),{}),Kt=Object(x["a"])(Yt,Ht,Jt,!1,null,null,null),Qt=Kt.exports,Wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"signin"},[a("div",{staticClass:"container"},[a("img",{staticClass:"signin__logo",attrs:{src:r("6871"),alt:""}}),a("form",{staticClass:"signin__form",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("div",{staticClass:"headline"},[t._v(" Вход ")]),a("div",{staticClass:"form-group",class:{invalid:t.$v.email.$error}},[a("label",{staticClass:"signin__label",attrs:{for:"login"}},[t._v("E-mail:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"login",type:"text"},domProps:{value:t.email},on:{blur:function(e){return t.$v.email.$touch()},input:function(e){e.target.composing||(t.email=e.target.value)}}}),t.$v.email.$anyError?a("p",[t._v(" Введите email. ")]):t._e()]),a("div",{staticClass:"form-group",class:{invalid:t.$v.password.$error}},[a("label",{staticClass:"signin__label",attrs:{for:"password"}},[t._v("Пароль:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password"},domProps:{value:t.password},on:{blur:function(e){return t.$v.password.$touch()},input:function(e){e.target.composing||(t.password=e.target.value)}}}),t.$v.password.$anyError?a("p",[t._v(" Введите пароль. ")]):t._e()]),a("div",{staticClass:"spacer"}),a("app-button",[t._v("Войти")]),a("div",{staticClass:"spacer"}),a("router-link",{attrs:{to:"/signup"}},[a("app-button",[t._v("Регистрация")])],1)],1)])])},Xt=[],Zt=r("b5ae"),te=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"button"},[t._t("default")],2)},ee=[],re={props:{value:{type:String,default:null}}},ae=re,ne=(r("8274"),Object(x["a"])(ae,te,ee,!1,null,null,null)),ie=ne.exports,se={components:{appButton:ie},data:function(){return{email:"",password:""}},validations:{email:{required:Zt["required"],email:Zt["email"]},password:{required:Zt["required"]}},methods:{onSubmit:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("signin",{email:t.email,password:t.password});case 2:t.$router.replace("/products");case 3:case"end":return e.stop()}}),e)})))()}}},oe=se,ue=(r("11fc"),Object(x["a"])(oe,Wt,Xt,!1,null,null,null)),ce=ue.exports,le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"signup"},[a("div",{staticClass:"container"},[a("img",{staticClass:"signup__logo",attrs:{src:r("6871"),alt:""}}),a("form",{staticClass:"signup__form",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("div",{staticClass:"headline"},[t._v(" Регистрация ")]),a("div",{staticClass:"form-group",class:{invalid:t.$v.name.$error}},[a("label",{staticClass:"signup__label",attrs:{for:"name"}},[t._v("Ваше имя:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{id:"name",type:"text"},domProps:{value:t.name},on:{blur:function(e){return t.$v.name.$touch()},input:function(e){e.target.composing||(t.name=e.target.value)}}}),t.$v.name.$anyError?a("p",[t._v(" Пожалуйста, введите имя! ")]):t._e()]),a("div",{staticClass:"form-group",class:{invalid:t.$v.login.$error}},[a("label",{staticClass:"signup__label",attrs:{for:"login"}},[t._v("Придумайте логин:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],attrs:{id:"login",type:"text"},domProps:{value:t.login},on:{blur:function(e){return t.$v.login.$touch()},input:function(e){e.target.composing||(t.login=e.target.value)}}}),t.$v.login.$anyError?a("p",[t._v(" Пожалуйста, введите логин (не менее 6 знаков)! ")]):t._e()]),a("div",{staticClass:"form-group",class:{invalid:t.$v.email.$error}},[a("label",{staticClass:"signup__label",attrs:{for:"email"}},[t._v("Ваш e-mail:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"email",type:"text"},domProps:{value:t.email},on:{blur:function(e){return t.$v.email.$touch()},input:function(e){e.target.composing||(t.email=e.target.value)}}}),t.$v.email.$anyError?a("p",[t._v(" Пожалуйста, введите правильный email! ")]):t._e()]),a("div",{staticClass:"form-group",class:{invalid:t.$v.password.$error}},[a("label",{staticClass:"signup__label",attrs:{for:"password"}},[t._v("Придумайте пароль:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password"},domProps:{value:t.password},on:{blur:function(e){return t.$v.password.$touch()},input:function(e){e.target.composing||(t.password=e.target.value)}}}),t.$v.password.$anyError?a("p",[t._v(" Пароль должен быть не менее 6 знаков! ")]):t._e()]),a("div",{staticClass:"form-group",class:{invalid:t.$v.confirmPassword.$error}},[a("label",{staticClass:"signup__label",attrs:{for:"confirmPassword"}},[t._v("Повторите пароль:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPassword,expression:"confirmPassword"}],attrs:{id:"confirmPassword",type:"password"},domProps:{value:t.confirmPassword},on:{blur:function(e){return t.$v.confirmPassword.$touch()},input:function(e){e.target.composing||(t.confirmPassword=e.target.value)}}}),t.$v.confirmPassword.$anyError?a("p",[t._v(" Пароль должен совпадать! ")]):t._e()]),a("div",{staticClass:"spacer"}),a("app-button",{attrs:{disabled:t.$v.$invalid}},[t._v(" Зарегистрироваться ")]),a("div",{staticClass:"spacer"}),a("router-link",{attrs:{to:"/signin"}},[a("app-button",[t._v("Войти")])],1)],1)])])},pe=[],de={components:{appButton:ie},data:function(){return{name:"",login:"",email:"",password:"",confirmPassword:""}},validations:{email:{required:Zt["required"],email:Zt["email"]},name:{required:Zt["required"]},login:{required:Zt["required"],minLen:Object(Zt["minLength"])(6)},password:{required:Zt["required"],minLen:Object(Zt["minLength"])(6)},confirmPassword:{sameAs:Object(Zt["sameAs"])("password")}},methods:{onSubmit:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("signup",{name:t.name,login:t.login,email:t.email,password:t.password});case 2:t.$router.replace("/products");case 3:case"end":return e.stop()}}),e)})))()}}},ve=de,fe=(r("74c8"),Object(x["a"])(ve,le,pe,!1,null,null,null)),me=fe.exports,he=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"products"},[r("div",{staticClass:"spacer"}),t._l(t.products,(function(t){return r("app-product-preview",{key:t.id,attrs:{product:t}})})),t.loadedData?r("infinite-loading",{on:{infinite:t.infiniteHandler}}):t._e(),t.loadedData?t._e():r("app-loading")],2)])},_e=[],ge=(r("4de4"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("router-link",{staticClass:"product-preview",attrs:{to:{name:"ProductDetails",params:{id:t.product.id}}}},[r("app-gallery",{attrs:{product:t.product}}),r("div",{staticClass:"product-preview__info"},[r("div",{staticClass:"product-preview__name"},[t._v(" "+t._s(t.product.name)+" ")]),r("div",{staticClass:"product-preview__price"},[t._v(" "+t._s(t.product.price)+" руб. ")])])],1)],1)}),be=[],we=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("swiper",{staticClass:"swiper"},[t._l(t.product.image,(function(e){return r("swiper-slide",{key:e.url},[r("div",{staticClass:"product-preview__img",style:{backgroundImage:"url("+t.SERVER_URL+e.url+")"}})])})),r("div",{staticClass:"swiper-button-next",attrs:{slot:"button-next"},slot:"button-next"})],2)},Ce=[],ye="https://strapi.kameas.ru",ke="https://strapi.kameas.ru/uploads/empty_profile_536f5a8db1.png",$e={components:{Swiper:u["Swiper"],SwiperSlide:u["SwiperSlide"]},directives:{swiper:u["directive"]},props:{product:{type:Object,default:function(){return{}}}},data:function(){return{SERVER_URL:ye}}},xe=$e,Oe=Object(x["a"])(xe,we,Ce,!1,null,null,null),je=Oe.exports,Re={components:{appGallery:je},props:{product:{type:Object,default:function(){return{}}}}},Pe=Re,Ee=(r("eb0a"),Object(x["a"])(Pe,ge,be,!1,null,null,null)),Ie=Ee.exports,Te=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("loading",{attrs:{active:t.isLoading,"is-full-page":t.fullPage,color:"#d1cece"},on:{"update:active":function(e){t.isLoading=e}}})},De=[],Ue=r("9062"),Ne=r.n(Ue),Se=(r("e40d"),{components:{Loading:Ne.a},data:function(){return{fullPage:!0,isLoading:!0}}}),Ae=Se,Le=Object(x["a"])(Ae,Te,De,!1,null,null,null),Me=Le.exports,qe={components:{appProductPreview:Ie,appLoading:Me},data:function(){return{start:0,loadedData:!1,products:[]}},computed:Object(_["a"])(Object(_["a"])({},Object(w["c"])({idToken:function(t){return t.authorization.idToken}})),{},{isAuthorized:function(){return this.$store.getters.isAuthorized}}),created:function(){this.fetchProducts(0)},methods:{fetchProducts:function(t){var e=this;ht(this.idToken,t).then((function(t){var r=t.data;e.products=r.filter((function(t){return!0===t.active})),e.loadedData=!0}))},infiniteHandler:function(t){var e=this;this.start+=10,ht(this.idToken,this.start).then((function(r){if(r.data.length>0){var a=r.data,n=a.filter((function(t){return!0===t.active})),i=e.products.concat(n);e.products=i,t.loaded()}else t.complete()}))}}},ze=qe,Be=(r("860f"),Object(x["a"])(ze,he,_e,!1,null,null,null)),Ve=Be.exports,Fe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.product?r("div",{staticClass:"product-detail"},[r("app-gallery",{attrs:{product:t.product}}),r("div",{staticClass:"container"},[r("div",{staticClass:"product-detail__info"},[r("div",{staticClass:"product-detail__name"},[t._v(" "+t._s(t.product.name)+" ")]),r("div",{staticClass:"product-detail__price"},[t._v(" "+t._s(t.product.price)+" руб. ")])]),r("router-link",{staticClass:"product-detail__author",attrs:{to:{name:"CookerProfile",params:{id:t.product.author.id}}}},[t.product.author.image[0]?r("div",{staticClass:"product-detail__author-img",style:{backgroundImage:"url("+t.SERVER_URL+t.product.author.image[0].url+")"}}):t._e(),r("div",{staticClass:"product-detail__author-name"},[t._v(" "+t._s(t.product.author.name)+" ")])]),r("div",{staticClass:"product-detail__description"},[t._v(" "+t._s(t.product.description)+" ")]),r("div",{staticClass:"product-detail__details"},[r("table",{staticClass:"product-detail__payments"},[r("tr",[r("td",[t._v("Оплата:")]),r("td",[t._v(t._s(t.paymentMethod))])]),r("tr",[r("td",[t._v("Доставка:")]),r("td",[t._v(t._s(t.delivery))])]),r("tr",[r("td",[t._v("Для веганов:")]),r("td",[t._v(t._s(t.vegan))])])])]),t.product.active?r("app-button",{nativeOn:{click:function(e){return t.addItemToCart(e)}}},[t._v(" Добавить в корзину ")]):t._e(),r("div",{staticClass:"spacer"}),t.authUser&&t.product.active?r("app-button",{nativeOn:{click:function(e){return t.removeProduct(e)}}},[t._v(" Закрыть объявление ")]):t._e(),t.loadedData?t._e():r("app-loading")],1)],1):t._e()},Ge=[],He=r("3835"),Je={components:{appButton:ie,appGallery:je,appLoading:Me},data:function(){return{product:null,loadedData:!1,SERVER_URL:ye,EMPTY_IMAGE_URL:ke}},computed:Object(_["a"])(Object(_["a"])({},Object(w["c"])({idToken:function(t){return t.authorization.idToken},userId:function(t){return t.authorization.userId}})),{},{paymentMethod:function(){return"cash"===this.product.paymentMethod?"Наличные":"Перевод на карту"},delivery:function(){return"pickUp"===this.product.delivery?"Забрать у меня":"Доставлю на дом"},vegan:function(){return this.product.vegan?"Да":"Нет"},authUser:function(){return this.product.author.id===this.userId}}),created:function(){this.getProductData(this.$route.params.id)},methods:{getProductData:function(t){var e=this;wt(t,this.idToken).then((function(t){e.loadedData=!0;var r=Object(He["a"])(t.data,1);e.product=r[0]}))},addItemToCart:function(){var t={name:this.product.name,price:this.product.price,image:this.product.image,count:1,id:this.product.id};this.$store.dispatch("addItemToCart",t)},removeProduct:function(){this.product.active=!1,gt(this.product,this.idToken)}}},Ye=Je,Ke=(r("a887"),Object(x["a"])(Ye,Fe,Ge,!1,null,null,null)),Qe=Ke.exports,We=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"spacer"}),r("div",{staticClass:"headline"},[t._v(" Новое блюдо ")]),r("form",{ref:"uploadForm",staticClass:"new-product",attrs:{action:""}},[r("label",{attrs:{for:"new-product__name"}},[t._v("Название:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"new-product__input",attrs:{id:"new-product__name",type:"text"},domProps:{value:t.name},on:{blur:function(e){return t.$v.name.$touch()},input:function(e){e.target.composing||(t.name=e.target.value)}}}),t.$v.name.$anyError?r("p",{staticClass:"error-message"},[t._v(" Имя является обязательной строкой! ")]):t._e(),r("label",{staticClass:"error-message",attrs:{for:"new-product__price"}},[t._v("Цена:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],staticClass:"new-product__input",attrs:{id:"new-product__price",type:"text"},domProps:{value:t.price},on:{blur:function(e){return t.$v.price.$touch()},input:function(e){e.target.composing||(t.price=e.target.value)}}}),t.$v.price.$anyError?r("p",{staticClass:"error-message"},[t._v(" Пожалуйста, введите число! ")]):t._e(),r("label",{attrs:{for:"file"}},[t._v("Загрузите фото блюда:")]),r("div",[r("file-upload",{ref:"upload",staticClass:"new-product__upload-button",attrs:{multiple:!0,"post-action":"/post.method","put-action":"/put.method"},on:{"input-filter":t.inputFilter},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}},[r("i",{staticClass:"fa fa-plus"}),t._v(" Выберите файлы ")])],1),t.files.length>0?r("div",{staticClass:"new-product__upload-list"},[t._v(" Загруженные файлы: "),r("ul",t._l(t.files,(function(e){return r("li",{key:e.id},[r("span",[t._v(t._s(e.name))])])})),0)]):t._e(),t.$v.file.$anyError?r("p",{staticClass:"error-message"},[t._v(" Пожалуйста, прикрепите фото блюда! ")]):t._e(),r("label",{attrs:{for:"new-product__info"}},[t._v("Описание:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"new-product__input",attrs:{id:"new-product__info",type:"text"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),r("label",{attrs:{for:"new-product__payment-method"}},[t._v("Предпочитаемый способ оплаты:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.chosenPaymentMethod,expression:"chosenPaymentMethod"}],attrs:{id:"new-product__payment-method"},on:{blur:function(e){return t.$v.chosenPaymentMethod.$touch()},change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.chosenPaymentMethod=e.target.multiple?r:r[0]}}},[r("option",[t._v("Перевод на карту")]),r("option",[t._v("Наличными")])]),t.$v.chosenPaymentMethod.$anyError?r("p",{staticClass:"error-message"},[t._v(" Пожалуйста, выберите способ оплаты. ")]):t._e(),r("label",{attrs:{for:"new-product__delivery"}},[t._v("Доставка:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.chosenDeliveryMethod,expression:"chosenDeliveryMethod"}],attrs:{id:"new-product__delivery"},on:{blur:function(e){return t.$v.chosenDeliveryMethod.$touch()},change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.chosenDeliveryMethod=e.target.multiple?r:r[0]}}},[r("option",[t._v("На дом")]),r("option",[t._v("Забрать у меня")])]),t.$v.chosenDeliveryMethod.$anyError?r("p",{staticClass:"error-message"},[t._v(" Пожалуйста, выберите способ доставки. ")]):t._e(),r("label",[t._v("Для веганов:")]),r("div",{staticClass:"new-product__vegan"},[r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.vegan,expression:"vegan"}],attrs:{id:"yes",type:"radio",value:"true"},domProps:{checked:t._q(t.vegan,"true")},on:{blur:function(e){return t.$v.vegan.$touch()},change:function(e){t.vegan="true"}}}),r("label",{attrs:{for:"yes"}},[t._v("Да")]),t.$v.vegan.$anyError?r("p",{staticClass:"error-message"},[t._v(" Пожалуйста, укажите, подходит ли блюдо для веганов! ")]):t._e()]),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.vegan,expression:"vegan"}],attrs:{id:"no",type:"radio",value:"false"},domProps:{checked:t._q(t.vegan,"false")},on:{change:function(e){t.vegan="false"}}}),r("label",{attrs:{for:"no"}},[t._v("Нет")])])])]),r("div",{staticClass:"spacer"}),r("app-button",{nativeOn:{click:function(e){return t.saveProduct(e)}}},[t._v(" Сохранить ")])],1)},Xe=[],Ze=(r("a4d3"),r("e01a"),r("3ca3"),r("ddb0"),r("2b3d"),r("b85c")),tr={components:{appButton:ie},data:function(){return{name:"",description:"",price:null,chosenPaymentMethod:"",chosenDeliveryMethod:"",vegan:null,files:[]}},validations:{name:{required:Zt["required"]},price:{required:Zt["required"],numeric:Zt["numeric"]},file:{required:Zt["required"]},chosenPaymentMethod:{required:Zt["required"]},chosenDeliveryMethod:{required:Zt["required"]},vegan:{required:Zt["required"]}},computed:Object(_["a"])(Object(_["a"])({},Object(w["c"])({author:function(t){return t.authorization.userId}})),{},{delivery:function(){return"На дом"===this.chosenDeliveryMethod?"deliveryToHome":"pickUp"},paymentMethod:function(){return"Наличные"===this.chosenPaymentMethod?"cash":"card"}}),methods:{saveProduct:function(){var t,e=this,r={name:this.name,description:this.description,price:this.price,paymentMethod:this.paymentMethod,delivery:this.delivery,vegan:this.vegan,author:this.author,active:!0},a=new FormData,n=Object(Ze["a"])(this.files);try{for(n.s();!(t=n.n()).done;){var i=t.value;a.append("files",i.file,i.file.name)}}catch(s){n.e(s)}finally{n.f()}ft(a,this.$store.state.authorization.idToken).then((function(t){var a,n=t.data,i=[],o=Object(Ze["a"])(n);try{for(o.s();!(a=o.n()).done;){var u=a.value;i.push(u.id)}}catch(s){o.e(s)}finally{o.f()}r.image=i,vt(r,e.$store.state.authorization.idToken).then((function(t){var r=t.data.id;e.$router.replace("/products/".concat(r))}))}))},inputFilter:function(t,e,r){if(!t||e||/\.(jpeg|jpe|jpg|gif|png|webp)$/i.test(t.name)){t.blob="";var a=window.URL||window.webkitURL;a&&a.createObjectURL&&(t.blob=a.createObjectURL(t.file))}else r()}}},er=tr,rr=(r("7fc1"),Object(x["a"])(er,We,Xe,!1,null,null,null)),ar=rr.exports,nr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"spacer"}),r("div",{staticClass:"headline"},[t._v(" Корзина ")]),t.cart.length>0?r("div",{staticClass:"cart cart_full"},[t._l(t.cart,(function(e){return r("app-cart-item",{key:e.id,attrs:{item:e}},[t._v(" "+t._s(t.cart)+" ")])})),r("div",{staticClass:"spacer"}),r("app-button",{nativeOn:{click:function(e){return t.confirmCart(e)}}},[t._v(" Подтвердить ")]),r("div",{staticClass:"spacer"}),r("app-button",{nativeOn:{click:function(e){return t.clearCart(e)}}},[t._v(" Очистить корзину ")])],2):r("div",{staticClass:"cart cart_empty"},[r("i",{staticClass:"far fa-sad-tear"}),t._v(" Здесь пока ничего нет... ")])])},ir=[],sr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"product-preview product-preview_type_vertical"},[r("div",{staticClass:"product-preview__description"},[r("img",{attrs:{src:""+t.SERVER_URL+t.item.image[0].url,alt:""}}),r("div",{staticClass:"product-preview__info"},[r("div",{staticClass:"product-preview__name"},[t._v(" "+t._s(t.item.name)+" ")]),r("div",{staticClass:"product-preview__price"},[t._v(" "+t._s(t.item.price)+" руб. ")])])]),r("div",{staticClass:"product-preview__prices"},[r("div",{staticClass:"product-preview__amount"},[r("div",{staticClass:"product-preview__prices-plus-button",on:{click:t.increaseCount}},[r("i",{staticClass:"fas fa-plus-circle"})]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.item.count,expression:"item.count"}],staticClass:"product-preview__count",attrs:{type:"number",min:"0",step:"1"},domProps:{value:t.item.count},on:{input:function(e){e.target.composing||t.$set(t.item,"count",e.target.value)}}}),r("div",{staticClass:"product-preview__prices-minus-button",on:{click:t.decreaseCount}},[r("i",{staticClass:"fas fa-minus-circle"})])]),r("div",{staticClass:"product-preview__sum"},[t._v(" Всего: "+t._s(t.item.price*t.item.count)+" руб. ")])])]),r("div",{staticClass:"spacer"})])},or=[],ur={props:{item:{type:Object,default:function(){return{}}}},data:function(){return{SERVER_URL:ye}},computed:{count:function(){return this.item.count}},methods:{increaseCount:function(){this.item.count+=1},decreaseCount:function(){this.item.count-=1}}},cr=ur,lr=(r("e22a"),Object(x["a"])(cr,sr,or,!1,null,null,null)),pr=lr.exports,dr={components:{appCartItem:pr,appButton:ie},computed:Object(_["a"])({},Object(w["b"])(["cart"])),created:function(){this.$store.dispatch("getCart")},methods:{confirmCart:function(){this.clearCart(),this.$router.replace("/confirm")},clearCart:function(){at(),this.$router.go()}}},vr=dr,fr=(r("3c33"),Object(x["a"])(vr,nr,ir,!1,null,null,null)),mr=fr.exports,hr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"spacer"}),r("div",{staticClass:"headline"},[t._v(" Профиль ")]),r("form",{staticClass:"user-profile",attrs:{action:""}},[r("label",{attrs:{for:"user-profile__name"}},[t._v("Имя:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"user-profile__input",attrs:{id:"user-profile__name",type:"text",disabled:!t.isEditing},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}}),r("label",{attrs:{for:"user-profile__address"}},[t._v("Адрес:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.address,expression:"user.address"}],staticClass:"user-profile__input",attrs:{id:"user-profile__address",type:"text",disabled:!t.isEditing},domProps:{value:t.user.address},on:{input:function(e){e.target.composing||t.$set(t.user,"address",e.target.value)}}}),r("label",{attrs:{for:"user-profile__email"}},[t._v("Почта:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"user-profile__input",attrs:{id:"user-profile__email",type:"email",disabled:!t.isEditing},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),r("label",{attrs:{for:"user-profile__number"}},[t._v("Телефон:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.number,expression:"user.number"}],staticClass:"user-profile__input",attrs:{id:"user-profile__number",type:"text",disabled:!t.isEditing},domProps:{value:t.user.number},on:{input:function(e){e.target.composing||t.$set(t.user,"number",e.target.value)}}}),r("label",{attrs:{for:"file"}},[t._v("Загрузите фото блюда:")]),r("input",{staticClass:"new-product__input",attrs:{id:"file",type:"file",disabled:!t.isEditing},on:{change:t.handleFileUpload}}),r("label",{attrs:{for:"user-profile__info"}},[t._v("О себе:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.info,expression:"user.info"}],staticClass:"user-profile__input",attrs:{id:"user-profile__info",type:"text",disabled:!t.isEditing},domProps:{value:t.user.info},on:{input:function(e){e.target.composing||t.$set(t.user,"info",e.target.value)}}})]),t.isEditing?r("app-button",{nativeOn:{click:function(e){return t.updateUserData(e)}}},[t._v(" Сохранить ")]):r("app-button",{nativeOn:{click:function(e){return t.editUserData(e)}}},[t._v(" Редактировать ")]),t.loadedData?t._e():r("app-loading")],1)},_r=[],gr={components:{appButton:ie,appLoading:Me},data:function(){return{user:{},isEditing:!1,file:null,loadedData:!1}},computed:Object(_["a"])({},Object(w["c"])({idToken:function(t){return t.authorization.idToken},userId:function(t){return t.authorization.userId}})),created:function(){this.getUserData()},methods:{editUserData:function(){this.isEditing=!this.isEditing},getUserData:function(){var t=this;$t(this.idToken,this.userId).then((function(e){t.loadedData=!0,t.setUserData(e.data)}))},setUserData:function(t){var e=Object(He["a"])(t,1);this.user=e[0]},updateUserData:function(){if(this.user.address=this.address,this.user.email=this.email,this.user.number=this.number,this.user.info=this.info,this.file){var t=new FormData;t.append("files",this.file),this.saveNewProfilePicture(t)}else this.saveUserData(this.user);this.buttonValue="Редактировать",this.$router.go()},saveNewProfilePicture:function(t){var e=this;Ot(this.idToken,t).then((function(t){var r=t.data[0].id;e.user.image=r,e.saveUserData(e.user)}))},saveUserData:function(t){Rt(this.idToken,this.userId,t)},handleFileUpload:function(t){var e=Object(He["a"])(t.target.files,1);this.file=e[0]}}},br=gr,wr=(r("427e"),Object(x["a"])(br,hr,_r,!1,null,null,null)),Cr=wr.exports,yr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"cooker-profile"},[t.user.image[0]?a("img",{staticClass:"cooker-profile__img",attrs:{src:""+t.SERVER_URL+t.user.image[0].url,alt:""}}):a("img",{staticClass:"cooker-profile__img",attrs:{src:r("4f24")}}),a("div",{staticClass:"spacer"}),a("div",{staticClass:"container"},[a("div",{staticClass:"headline"},[t._v(" "+t._s(t.user.name)+" ")]),a("div",{staticClass:"cooker-profile__description"},[t._v(" "+t._s(t.user.info)+" ")]),t.hasProducts?a("div",{staticClass:"cooker-profile__current-dishes"},[a("div",{staticClass:"headline"},[t._v(" "+t._s(t.user.name)+" - блюда ")]),t._l(t.products,(function(t){return a("app-product-preview",{key:t.id,attrs:{product:t}})}))],2):t._e(),t.hasProducts?a("div",{staticClass:"cooker-profile__prev-dishes"},[a("div",{staticClass:"headline"},[t._v(" "+t._s(t.user.name)+" - прошлые блюда ")]),t._l(t.prevProducts,(function(t){return a("app-product-preview",{key:t.id,attrs:{product:t}})}))],2):t._e(),!t.hasProducts&&t.loadedData?a("div",[t._v(" У данного пользователя еще нет продуктов. ")]):t._e()])]),t.loadedData?t._e():a("app-loading")],1)},kr=[],$r={components:{appProductPreview:Ie,appLoading:Me},data:function(){return{user:{},products:[],prevProducts:[],hasProducts:!1,loadedData:!1,SERVER_URL:ye,EMPTY_IMAGE_URL:ke}},computed:Object(_["a"])({},Object(w["c"])({idToken:function(t){return t.authorization.idToken}})),created:function(){this.getUserData(this.$route.params.id)},methods:{getUserData:function(t){var e=this;$t(this.idToken,t).then((function(t){var r=Object(He["a"])(t.data,1);e.user=r[0],e.getUserProducts(e.user.id)}))},getUserProducts:function(t){var e=this;yt(t,this.idToken,!0).then((function(r){e.loadedData=!0,r.data.length>0?(e.hasProducts=!0,e.products=r.data,yt(t,e.idToken,!1).then((function(t){e.prevProducts=t.data}))):e.hasProducts=!1}))}}},xr=$r,Or=(r("72ff"),Object(x["a"])(xr,yr,kr,!1,null,null,null)),jr=Or.exports,Rr=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Pr=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"ready"},[r("i",{staticClass:"fas fa-check-circle"}),r("div",{staticClass:"headline"},[t._v(" Готово! ")])])}],Er=(r("5664"),{}),Ir=Object(x["a"])(Er,Rr,Pr,!1,null,null,null),Tr=Ir.exports;function Dr(t,e,r){return Ur.apply(this,arguments)}function Ur(){return Ur=Object(f["a"])(regeneratorRuntime.mark((function t(e,r,a){var n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=!1,t.next=3,z();case 3:return i=t.sent,t.next=6,Y();case 6:if(s=t.sent,i&&s&&(n=!0),"/"!==e.path&&"/signin"!==e.path&&"/signup"!==e.path){t.next=18;break}if(!n){t.next=15;break}return t.next=12,qt.dispatch("tryAutoLogin",{idToken:i,userId:s});case 12:a("/products"),t.next=16;break;case 15:a();case 16:t.next=25;break;case 18:if(!n){t.next=24;break}return t.next=21,qt.dispatch("tryAutoLogin",{idToken:i,userId:s});case 21:a(),t.next=25;break;case 24:a("/signin");case 25:case"end":return t.stop()}}),t)}))),Ur.apply(this,arguments)}a["default"].use(Gt["a"]);var Nr=[{path:"/",component:Qt},{path:"/signin",component:ce,beforeEnter:Dr},{path:"/signup",component:me,beforeEnter:Dr},{path:"/settings",name:"UserProfile",component:Cr,props:!0,beforeEnter:Dr},{path:"/profile/:id",name:"CookerProfile",component:jr,props:!0,beforeEnter:Dr},{path:"/products",name:"Products",component:Ve,beforeEnter:Dr},{path:"/products/:id",name:"ProductDetails",component:Qe,props:!0,beforeEnter:Dr},{path:"/cart",component:mr,beforeEnter:Dr},{path:"/new-product",component:ar,beforeEnter:Dr},{path:"/confirm",component:Tr,beforeEnter:Dr},{path:"*",redirect:"/"}],Sr=new Gt["a"]({mode:"history",routes:Nr}),Ar=(r("bbe3"),r("8019"));a["default"].component("file-upload",Ar),a["default"].config.productionTip=!1,a["default"].use(i.a),a["default"].use(o.a),a["default"].use(c.a),a["default"].use(p.a,{}),new a["default"]({render:function(t){return t(Ft)},router:Sr,store:qt}).$mount("#app")},"60ae":function(t,e,r){},6871:function(t,e,r){t.exports=r.p+"img/logo_2.d4c64e41.png"},"72ff":function(t,e,r){"use strict";var a=r("5047"),n=r.n(a);n.a},"74c8":function(t,e,r){"use strict";var a=r("3e47"),n=r.n(a);n.a},"7fc1":function(t,e,r){"use strict";var a=r("1e31"),n=r.n(a);n.a},8274:function(t,e,r){"use strict";var a=r("d277"),n=r.n(a);n.a},8358:function(t,e,r){},8394:function(t,e,r){},"85ec":function(t,e,r){},"860f":function(t,e,r){"use strict";var a=r("25f3"),n=r.n(a);n.a},"8f99":function(t,e,r){},a216:function(t,e,r){},a887:function(t,e,r){"use strict";var a=r("ee6e"),n=r.n(a);n.a},abd8:function(t,e,r){"use strict";var a=r("e4fa"),n=r.n(a);n.a},d277:function(t,e,r){},e22a:function(t,e,r){"use strict";var a=r("8394"),n=r.n(a);n.a},e4fa:function(t,e,r){},e70b:function(t,e,r){},eb0a:function(t,e,r){"use strict";var a=r("f920"),n=r.n(a);n.a},ee6e:function(t,e,r){},f920:function(t,e,r){}});
//# sourceMappingURL=app.741314cf.js.map